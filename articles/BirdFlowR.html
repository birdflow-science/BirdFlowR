<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>BirdFlowR • BirdFlowR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="BirdFlowR">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BirdFlowR</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.1.0.9075</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/BirdFlowR.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/BirdFlowOverview.html">BirdFlow Model Overview, Uses, and Limitations</a></li>
    <li><a class="dropdown-item" href="../articles/Installation.html">Detailed installation instructions</a></li>
    <li><a class="dropdown-item" href="../articles/Polygons.html">Calculate movement among polygons</a></li>
    <li><a class="dropdown-item" href="../articles/Preprocess.html">Preprocess and sparsify</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/birdflow-science/BirdFlowR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>BirdFlowR</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/birdflow-science/BirdFlowR/blob/main/vignettes/BirdFlowR.Rmd" class="external-link"><code>vignettes/BirdFlowR.Rmd</code></a></small>
      <div class="d-none name"><code>BirdFlowR.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h3>
<div class="section level4">
<h4 id="install-packages">Install packages<a class="anchor" aria-label="anchor" href="#install-packages"></a>
</h4>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">installed</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="st">"remotes"</span> <span class="op"><a href="https://rspatial.github.io/terra/reference/match.html" class="external-link">%in%</a></span> <span class="va">installed</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="st">"rnaturalearthdata"</span> <span class="op"><a href="https://rspatial.github.io/terra/reference/match.html" class="external-link">%in%</a></span> <span class="va">installed</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"rnaturalearthdata"</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"birdflow-science/BirdFlowModels"</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"birdflow-science/BirdFlowR"</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="load-libraries">Load libraries<a class="anchor" aria-label="anchor" href="#load-libraries"></a>
</h4>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">BirdFlowModels</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://birdflow-science.github.io/BirdFlowR/">BirdFlowR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; terra 1.8.50</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Linking to GEOS 3.12.1, GDAL 3.8.4, PROJ 9.4.0; sf_use_s2() is TRUE</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="load-model">Load model<a class="anchor" aria-label="anchor" href="#load-model"></a>
</h4>
<p>The BirdFlow Science team has shared a <a href="https://birdflow-science.s3.amazonaws.com/collection/index.html" class="external-link">collection
of fitted models</a> for use with the BirdFlowR package. The website
includes reports on each species.</p>
<p>We can also access the collection index through the package.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load and print index</span></span>
<span><span class="va">index</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_collection_index.html">load_collection_index</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Downloading collection index</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">index</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"common_name"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt;                model        common_name</span></span>
<span><span class="co">#&gt; 1 amewoo_prebreeding  American Woodcock</span></span>
<span><span class="co">#&gt; 3 buwtea_prebreeding   Blue-winged Teal</span></span>
<span><span class="co">#&gt; 4 lobcur_prebreeding Long-billed Curlew</span></span>
<span><span class="co">#&gt; 5 swahaw_prebreeding    Swainson's Hawk</span></span></code></pre></div>
<p>And we can load a model from the collection based on the
<code>model</code> column from the index.<br><strong>Note:</strong> in the vignette this block isn’t executed.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load a specific model</span></span>
<span><span class="va">bf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_model.html">load_model</a></span><span class="op">(</span><span class="st">"amewoo_prebreeding"</span><span class="op">)</span> <span class="co"># caches locally and loads from cache</span></span></code></pre></div>
<p>This loads the smaller example model instead for efficiency of
package building and testing, but do not use this one for science!</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bf</span> <span class="op">&lt;-</span> <span class="fu">BirdFlowModels</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/BirdFlowModels/man/BirdFlowModels.html" class="external-link">amewoo</a></span> <span class="co"># example and test dataset</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="access-basic-information">Access basic information<a class="anchor" aria-label="anchor" href="#access-basic-information"></a>
</h3>
<p><code><a href="../reference/dimensions.html">dim()</a></code>, <code><a href="../reference/dimensions.html">nrow()</a></code>, and <code><a href="../reference/dimensions.html">ncol()</a></code> all
report on raster dimensions associated with the model.
<code>n_active</code> is the total number of cells that the BirdFlow
model can route birds through and is a subset of the cells in the
raster.<br><code><a href="../reference/dimensions.html">n_transitions()</a></code> and <code><a href="../reference/dimensions.html">n_distr()</a></code> report on
temporal dimensions. If the model <code><a href="../reference/dimensions.html">is_cyclical()</a></code>, they will
be equal.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Methods for base R functions:</span></span>
<span><span class="fu"><a href="../reference/dimensions.html">dim</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 22 31</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="../reference/dimensions.html">nrow</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span>, <span class="fu"><a href="../reference/dimensions.html">ncol</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 22 31</span></span>
<span><span class="va">bf</span> <span class="co"># same as print(bf)</span></span>
<span><span class="co">#&gt; American Woodcock BirdFlow model</span></span>
<span><span class="co">#&gt;   dimensions   : 22, 31, 52  (nrow, ncol, ntimesteps)</span></span>
<span><span class="co">#&gt;   resolution   : 150000, 150000  (x, y)</span></span>
<span><span class="co">#&gt;   active cells : 342</span></span>
<span><span class="co">#&gt;   size         : 12.5 Mb</span></span>
<span></span>
<span><span class="co"># BirdFlowR functions</span></span>
<span><span class="fu"><a href="../reference/dimensions.html">n_active</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 342</span></span>
<span><span class="fu"><a href="../reference/dimensions.html">n_transitions</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 52</span></span>
<span><span class="fu"><a href="../reference/dimensions.html">n_timesteps</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 52</span></span>
<span></span>
<span><span class="co"># Contents</span></span>
<span><span class="fu"><a href="../reference/has.html">has_marginals</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="../reference/has.html">has_distr</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span><span class="fu"><a href="../reference/has.html">has_transitions</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="fu"><a href="../reference/dimensions.html">is_cyclical</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="species-information-and-metadata">Species information and metadata<a class="anchor" aria-label="anchor" href="#species-information-and-metadata"></a>
</h3>
<p><code><a href="../reference/species_info.html">species_info()</a></code> and <code><a href="../reference/get_metadata.html">get_metadata()</a></code> take a
BirdFlow object as their first argument. An optional second argument
allows specifying a specific item, if omitted a list is returned with
all the available information.</p>
<p><code>species(bf)</code> is a shortcut for
<code>species_info(bf, "common_name")</code></p>
<p>Use <code>?species_info()</code> to see descriptions of all the
available information. Dates associated with migration and resident
seasons are likely to be useful.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/species_info.html">species</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "American Woodcock"</span></span>
<span><span class="fu"><a href="../reference/species_info.html">species</a></span><span class="op">(</span><span class="va">bf</span>, <span class="st">"scientific"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Scolopax minor"</span></span>
<span><span class="fu"><a href="../reference/species_info.html">species_info</a></span><span class="op">(</span><span class="va">bf</span>, <span class="st">"prebreeding_migration_start"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2021-01-18"</span></span>
<span><span class="va">si</span> <span class="op">&lt;-</span>  <span class="fu"><a href="../reference/species_info.html">species_info</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span> <span class="co"># list with all species information</span></span>
<span><span class="va">md</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_metadata.html">get_metadata</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span>  <span class="co"># list with all metadata</span></span>
<span><span class="fu"><a href="../reference/get_metadata.html">get_metadata</a></span><span class="op">(</span><span class="va">bf</span>, <span class="st">"birdflow_model_date"</span><span class="op">)</span> <span class="co"># date model was exported from python</span></span>
<span><span class="co">#&gt; [1] "2023-11-21 17:19:27.009766"</span></span>
<span></span>
<span><span class="fu"><a href="../reference/validate_BirdFlow.html">validate_BirdFlow</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span>  <span class="co"># throws error if there are problems</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="spatial-aspects">Spatial aspects<a class="anchor" aria-label="anchor" href="#spatial-aspects"></a>
</h3>
<p>BirdFlow models are based on a raster representation of a time series
of species distributions and contain all the spatial information
necessary to recreate those distributions and to define how the raster
is positioned in space. BirdFlowR uses the <strong>terra</strong>
package to import raster data and provides BirdFlow methods for
functions defined in the terra package - so that you can use those
functions on BirdFlow objects.</p>
<p><code><a href="https://rspatial.github.io/terra/reference/crs.html" class="external-link">crs()</a></code> returns the coordinate reference system - useful
if you need to project other data to match the BirdFlow object.
<code><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">res()</a></code>, <code><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">xres()</a></code>, and <code><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">yres()</a></code>
describe the dimensions of individual cells in the model.
<code><a href="../reference/dimensions.html">ext()</a></code> returns a terra extent object.<br><code>compare_geom()</code> tests if the extent, resolution, and CRS of
two objects is the same. BirdFlowR includes methods to compare BirdFlow
models with each other and with terra objects.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Methods for terra functions:</span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/crs.html" class="external-link">crs</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span> <span class="co"># well known text (long)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/crs.html" class="external-link">crs</a></span><span class="op">(</span><span class="va">bf</span>, proj <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>  <span class="co"># proj4 string</span></span>
<span><span class="co">#&gt; [1] "+proj=laea +lat_0=39.161 +lon_0=-85.094 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs"</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">res</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 150000 150000</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">xres</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span>, <span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">yres</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span><span class="op">)</span> <span class="co"># same as res(bf)</span></span>
<span><span class="co">#&gt; [1] 150000 150000</span></span>
<span><span class="fu"><a href="../reference/dimensions.html">ext</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span></span>
<span><span class="co">#&gt; SpatExtent : -2550000, 2100000, -1650000, 1650000 (xmin, xmax, ymin, ymax)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/xmin.html" class="external-link">xmin</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span>, <span class="fu"><a href="https://rspatial.github.io/terra/reference/xmin.html" class="external-link">xmax</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span>, <span class="fu"><a href="https://rspatial.github.io/terra/reference/xmin.html" class="external-link">ymin</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span>, <span class="fu"><a href="https://rspatial.github.io/terra/reference/xmin.html" class="external-link">ymax</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span><span class="op">)</span> <span class="co"># same as ext(bf)</span></span>
<span><span class="co">#&gt; [1] -2550000  2100000 -1650000  1650000</span></span>
<span></span>
<span><span class="co"># Compare geometries - do they have the same CRS, extent, and cell size</span></span>
<span><span class="fu"><a href="../reference/compareGeom-BirdFlow.html">compareGeom</a></span><span class="op">(</span><span class="va">bf</span>, <span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>BirdFlow objects also play nicely with the <em>sf</em> package.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bb</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">st_bbox</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span></span>
<span><span class="va">crs</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="retrieve-and-plot-distributions">Retrieve and plot distributions<a class="anchor" aria-label="anchor" href="#retrieve-and-plot-distributions"></a>
</h3>
<p>A distribution in BirdFlow is stored as a vector of values that
correspond to only the active cells (<code><a href="../reference/dimensions.html">n_active()</a></code>) in the
model. Multiple distributions are stored as matrices with
<code><a href="../reference/dimensions.html">n_active()</a></code> rows and a column for each distribution.</p>
<p>We can retrieve distributions in this format with
<code><a href="../reference/get_distr.html">get_distr()</a></code>. Use timestep, character dates, date objects,
or “all” to specify which distributions to retrieve.</p>
<p>Retrieve the first distribution and compare its length to the number
of active cells.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_distr.html">get_distr</a></span><span class="op">(</span><span class="va">bf</span>, <span class="fl">1</span><span class="op">)</span> <span class="co"># get first timestep distribution</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span>  <span class="co"># 1 distribution so d is a vector</span></span>
<span><span class="co">#&gt; [1] 342</span></span>
<span><span class="fu"><a href="../reference/dimensions.html">n_active</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span>  <span class="co"># its length is the the number of active cells in the model</span></span>
<span><span class="co">#&gt; [1] 342</span></span></code></pre></div>
<p>Get 5 distributions, the result is a matrix in which each column is a
distribution with a row for each active cell.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_distr.html">get_distr</a></span><span class="op">(</span><span class="va">bf</span>, <span class="fl">26</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/dimensions.html">dim</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 342   5</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">d</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt;       time</span></span>
<span><span class="co">#&gt; i      June 28       July 6      July 13 July 20      July 27</span></span>
<span><span class="co">#&gt;   [1,]       0 0.000000e+00 0.000000e+00       0 0.000000e+00</span></span>
<span><span class="co">#&gt;   [2,]       0 9.342922e-06 8.769396e-05       0 1.607396e-06</span></span>
<span><span class="co">#&gt;   [3,]       0 1.499294e-05 4.842432e-05       0 1.748452e-06</span></span></code></pre></div>
<p>We can also specify distributions with dates, or use “all” to
retrieve all the distributions.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_distr.html">get_distr</a></span><span class="op">(</span><span class="va">bf</span>, <span class="st">"2022-12-15"</span><span class="op">)</span> <span class="co"># from character date</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_distr.html">get_distr</a></span><span class="op">(</span><span class="va">bf</span>, <span class="st">"all"</span><span class="op">)</span>  <span class="co"># all distributions</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_distr.html">get_distr</a></span><span class="op">(</span><span class="va">bf</span>, <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>  <span class="co"># Using a Date object</span></span></code></pre></div>
<p>Use <code><a href="../reference/rasterize.html">rasterize_distr()</a></code> to convert a distribution to a
SpatRaster defined in the terra package. The second argument, the
BirdFlow model, is needed for the spatial information it contains.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_distr.html">get_distr</a></span><span class="op">(</span><span class="va">bf</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">26</span><span class="op">)</span><span class="op">)</span> <span class="co"># winter and summer</span></span>
<span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rasterize.html">rasterize_distr</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">bf</span><span class="op">)</span> <span class="co"># convert to SpatRaster</span></span></code></pre></div>
<p>Alternatively convert directly from BirdFlow to SpatRaster with
<code><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast()</a></code>. The second (optional) argument <code>which</code>
accepts the same inputs as <code>which</code> in
<code><a href="../reference/get_distr.html">get_distr()</a></code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span> <span class="co"># all distributions</span></span>
<span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">bf</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">26</span><span class="op">)</span><span class="op">)</span>  <span class="co"># 1st, and 26th timesteps.</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span></span></code></pre></div>
<p><img src="BirdFlowR_files/figure-html/rast-1.png" width="100%"></p>
<p>BirdFlowR provides convenience wrappers to functions in
<strong>rnaturalearth</strong> that load vector data and then crop and
transform it to make it suitable for plotting with BirdFlow output.</p>
<p><em><strong>Note:</strong> until <strong>rnaturalearth</strong> has
fully transitioned away from legacy packages you may see a warning about
them, but <strong>BirdFlowR</strong> does not use the legacy packages or
data formats itself.</em></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">bf</span>, <span class="fu"><a href="../reference/species_info.html">species_info</a></span><span class="op">(</span><span class="va">bf</span>, <span class="st">"prebreeding_migration_start"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span></span>
<span><span class="va">coast</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_naturalearth.html">get_coastline</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span>  <span class="co"># lines</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">coast</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="BirdFlowR_files/figure-html/unnamed-chunk-2-1.png" width="65%"></p>
</div>
<div class="section level2">
<h2 id="forecasting">Forecasting<a class="anchor" aria-label="anchor" href="#forecasting"></a>
</h2>
<p>In this section we will sample a single starting location from the
winter distribution and project it forward. We will generate a
distribution of predicted breeding grounds for birds that wintered at
the starting location.</p>
<p>Set predict parameters.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>    <span class="va">start</span> <span class="op">&lt;-</span> <span class="fl">1</span>     <span class="co">#  winter</span></span>
<span>    <span class="va">end</span> <span class="op">&lt;-</span>  <span class="fl">26</span>     <span class="co"># summer</span></span></code></pre></div>
<div class="section level3">
<h3 id="sample-starting-distribution">Sample starting distribution<a class="anchor" aria-label="anchor" href="#sample-starting-distribution"></a>
</h3>
<p><code><a href="../reference/sample_distr.html">sample_distr()</a></code> will sample from one or more input
distribution to select a single location per distribution. The result is
one or more distributions with ones in the selected location(s) and zero
elsewhere.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_distr.html">get_distr</a></span><span class="op">(</span><span class="va">bf</span>, <span class="va">start</span><span class="op">)</span></span>
<span><span class="va">location</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sample_distr.html">sample_distr</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="../reference/index_conversions.html">i_to_xy</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">as.logical</a></span><span class="op">(</span><span class="va">location</span><span class="op">)</span><span class="op">)</span>, <span class="va">bf</span><span class="op">)</span><span class="op">)</span>  <span class="co"># starting coordinates</span></span>
<span><span class="co">#&gt;         x       y</span></span>
<span><span class="co">#&gt; 1 -225000 -525000</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="project-forward-from-this-location-to-summer">Project forward from this location to summer<a class="anchor" aria-label="anchor" href="#project-forward-from-this-location-to-summer"></a>
</h3>
<p><code><a href="../reference/predict.BirdFlow.html">predict()</a></code> returns the distribution over time as a matrix
with one column per timestep.</p>
<p>The plot shows where birds that winter at a particular location are
likely to be as the year progresses and ultimately where they might
spend their summer. The probability density spreads as the weeks
progress.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/predict.BirdFlow.html">predict</a></span><span class="op">(</span><span class="va">bf</span>, distr <span class="op">=</span> <span class="va">location</span>, start <span class="op">=</span> <span class="va">start</span>, end <span class="op">=</span> <span class="va">end</span>,</span>
<span>             direction <span class="op">=</span> <span class="st">"forward"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rasterize.html">rasterize_distr</a></span><span class="op">(</span><span class="va">f</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">7</span>, <span class="fl">14</span>, <span class="fl">19</span><span class="op">)</span><span class="op">]</span>, <span class="va">bf</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">r</span><span class="op">)</span></span></code></pre></div>
<p><img src="BirdFlowR_files/figure-html/predict-1.png" width="100%"></p>
<p>Additionally, we can calculate the difference between the projected
distribution and the distribution of the species as a whole at the same
timestep.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">projected</span> <span class="op">&lt;-</span> <span class="va">f</span><span class="op">[</span>, <span class="fu"><a href="../reference/dimensions.html">ncol</a></span><span class="op">(</span><span class="va">f</span><span class="op">)</span><span class="op">]</span>  <span class="co"># last projected distribution</span></span>
<span><span class="va">diff</span> <span class="op">&lt;-</span>  <span class="va">projected</span> <span class="op">-</span> <span class="fu"><a href="../reference/get_distr.html">get_distr</a></span><span class="op">(</span><span class="va">bf</span>, <span class="va">end</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/rasterize.html">rasterize_distr</a></span><span class="op">(</span><span class="va">diff</span>, <span class="va">bf</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="BirdFlowR_files/figure-html/probability%20over%20time-1.png" width="65%"></p>
</div>
</div>
<div class="section level2">
<h2 id="generate-synthetic-routes">Generate synthetic routes<a class="anchor" aria-label="anchor" href="#generate-synthetic-routes"></a>
</h2>
<p>Here we sample locations from the American Woodcock winter
distribution and generate routes to their summer grounds.</p>
<p>Set route parameters.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n_positions</span> <span class="op">&lt;-</span>  <span class="fl">15</span> <span class="co"># number of starting positions</span></span>
<span><span class="va">start</span> <span class="op">&lt;-</span> <span class="fl">1</span>         <span class="co"># starting timestep (winter)</span></span>
<span><span class="va">end</span> <span class="op">&lt;-</span> <span class="fl">26</span>          <span class="co"># ending timestep (summer)</span></span></code></pre></div>
<div class="section level3">
<h3 id="generate-starting-locations">Generate starting locations<a class="anchor" aria-label="anchor" href="#generate-starting-locations"></a>
</h3>
<p>First extract the winter distribution, then use
<code>sample_locations()</code> with <code>n = n_positions</code> to
sample the input distribution repeatedly. The result is a matrix in
which each column has a single ‘1’ representing the sampled
location.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_distr.html">get_distr</a></span><span class="op">(</span><span class="va">bf</span>, <span class="va">start</span><span class="op">)</span></span>
<span><span class="va">locations</span>  <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sample_distr.html">sample_distr</a></span><span class="op">(</span><span class="va">d</span>, n <span class="op">=</span> <span class="va">n_positions</span>, bf <span class="op">=</span> <span class="va">bf</span>, format <span class="op">=</span> <span class="st">"xy"</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">locations</span><span class="op">$</span><span class="va">x</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">locations</span><span class="op">$</span><span class="va">y</span></span></code></pre></div>
<p>Plot the starting (winter) distribution and sampled locations.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">winter</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rasterize.html">rasterize_distr</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">bf</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">winter</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">points</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span></span></code></pre></div>
<p><img src="BirdFlowR_files/figure-html/plot%20starting%20distribution-1.png" width="65%"></p>
</div>
<div class="section level3">
<h3 id="generate-routes">Generate routes<a class="anchor" aria-label="anchor" href="#generate-routes"></a>
</h3>
<p><code><a href="../reference/route.html">route()</a></code> will generate synthetic routes for each starting
position. <code><a href="../reference/route.html">route()</a></code> returns a <code>BirdFlowRoutes</code>
object which has a <code>$data</code> element with a row for each
timestep of each route, but also includes some additional spatial,
temporal, and species information from the <code>BirdFlow</code>
object.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rts</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/route.html">route</a></span><span class="op">(</span><span class="va">bf</span>, x_coord <span class="op">=</span> <span class="va">x</span>, y_coord <span class="op">=</span> <span class="va">y</span>, start <span class="op">=</span> <span class="va">start</span>, end <span class="op">=</span> <span class="va">end</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/headtail.html" class="external-link">head</a></span><span class="op">(</span><span class="va">rts</span><span class="op">$</span><span class="va">data</span>, <span class="fl">4</span><span class="op">)</span></span>
<span><span class="co">#&gt;   route_id      x       y   i      lon      lat timestep       date route_type</span></span>
<span><span class="co">#&gt; 1        1 675000 -525000 271 -77.7671 34.19035        1 2021-01-04  synthetic</span></span>
<span><span class="co">#&gt; 2        1 675000 -525000 271 -77.7671 34.19035        2 2021-01-11  synthetic</span></span>
<span><span class="co">#&gt; 3        1 675000 -525000 271 -77.7671 34.19035        3 2021-01-18  synthetic</span></span>
<span><span class="co">#&gt; 4        1 675000 -525000 271 -77.7671 34.19035        4 2021-01-25  synthetic</span></span>
<span><span class="co">#&gt;   stay_id stay_len</span></span>
<span><span class="co">#&gt; 1       1        3</span></span>
<span><span class="co">#&gt; 2       1        3</span></span>
<span><span class="co">#&gt; 3       1        3</span></span>
<span><span class="co">#&gt; 4       1        3</span></span></code></pre></div>
<p>The <code><a href="../reference/route.html">route()</a></code> function can sample starting locations from
the distribution for the starting timestep so the following is
equivalent to the preceding two sections.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rts2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/route.html">route</a></span><span class="op">(</span><span class="va">bf</span>,  n <span class="op">=</span> <span class="va">n_positions</span>,  start <span class="op">=</span> <span class="va">start</span>, end <span class="op">=</span> <span class="va">end</span><span class="op">)</span></span></code></pre></div>
<p>We can specify the date range with any arguments supported by
<code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code> so an alternative to the above
with slightly different start and end dates is to use the season
argument. Here we route during the prebreeding migration.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rts3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/route.html">route</a></span><span class="op">(</span><span class="va">bf</span>, n <span class="op">=</span> <span class="va">n_positions</span>, season <span class="op">=</span> <span class="st">"prebreeding"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="using-base-r-plotting-to-plot-routes">Using base R plotting to plot routes<a class="anchor" aria-label="anchor" href="#using-base-r-plotting-to-plot-routes"></a>
</h3>
<p>Plot the route lines over the summer distribution along with points
at the starting and ending positions.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_distr.html">get_distr</a></span><span class="op">(</span><span class="va">bf</span>, <span class="va">end</span><span class="op">)</span></span>
<span><span class="va">summer</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rasterize.html">rasterize_distr</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">bf</span><span class="op">)</span></span>
<span></span>
<span><span class="va">line_col</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/rgb.html" class="external-link">rgb</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">.2</span><span class="op">)</span></span>
<span><span class="va">pt_col</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/rgb.html" class="external-link">rgb</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">.5</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">summer</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">points</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, cex <span class="op">=</span> <span class="fl">.4</span>, col <span class="op">=</span> <span class="va">pt_col</span>, pch <span class="op">=</span> <span class="fl">16</span><span class="op">)</span> <span class="co"># starting points</span></span>
<span></span>
<span><span class="va">rts_sf</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span><span class="va">rts</span><span class="op">$</span><span class="va">data</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span><span class="op">)</span>, crs <span class="op">=</span> <span class="va">rts</span><span class="op">$</span><span class="va">geom</span><span class="op">$</span><span class="va">crs</span><span class="op">)</span></span>
<span><span class="va">lines_sf</span> <span class="op">&lt;-</span> <span class="va">rts_sf</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">route_id</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>geometry <span class="op">=</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_combine.html" class="external-link">st_combine</a></span><span class="op">(</span><span class="va">geometry</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_cast.html" class="external-link">st_cast</a></span><span class="op">(</span><span class="st">"LINESTRING"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">lines_sf</span>, add <span class="op">=</span> <span class="cn">TRUE</span>, col <span class="op">=</span> <span class="va">line_col</span><span class="op">)</span>  <span class="co"># routes</span></span>
<span></span>
<span><span class="va">end_pts</span> <span class="op">&lt;-</span> <span class="va">rts</span><span class="op">$</span><span class="va">data</span><span class="op">[</span><span class="va">rts</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">timestep</span> <span class="op">==</span> <span class="va">end</span>, <span class="op">]</span>  <span class="co"># end points</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/lines.html" class="external-link">points</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">end_pts</span><span class="op">$</span><span class="va">x</span>, y <span class="op">=</span> <span class="va">end_pts</span><span class="op">$</span><span class="va">y</span>,</span>
<span>       cex <span class="op">=</span> <span class="fl">0.4</span>, pch <span class="op">=</span> <span class="fl">12</span>, col <span class="op">=</span> <span class="va">pt_col</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/title.html" class="external-link">title</a></span><span class="op">(</span>main <span class="op">=</span> <span class="fu"><a href="../reference/species_info.html">species</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="BirdFlowR_files/figure-html/plot%20routes%20with%20base%20R-1.png" width="65%"></p>
</div>
<div class="section level3">
<h3 id="or-use-the-plot-method">Or use the plot() method<a class="anchor" aria-label="anchor" href="#or-use-the-plot-method"></a>
</h3>
<p><code><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot()</a></code> will visualize <code>Routes</code> and
<code>BirdFlowRoutes</code> objects with time as a color gradient and
stop point dots that indicate how long a bird was at each location.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">rts</span>, <span class="va">bf</span><span class="op">)</span></span></code></pre></div>
<p><img src="BirdFlowR_files/figure-html/plot%20routes-1.png" width="65%"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ethan Plunkett, National Science Foundation.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
