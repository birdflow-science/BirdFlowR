<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Assign weights to points based on how close they are to the great circle line associated with each transition — weight_between • BirdFlowR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Assign weights to points based on how close they are to the great circle line associated with each transition — weight_between"><meta name="description" content="This internal function is used to create a betweenness weights array
with dimensions n_active(bf),
n_active(bf), and length(points).
The first two dimensions represent from and to cells of possible connections
between  pairs of locations within the BirdFlow model and both have
n_active() elements.
The third dimension represents reference points that might be between each
connection.
Cell values are the weight to use when adding the transition probabilities
to the reference point flux."><meta property="og:description" content="This internal function is used to create a betweenness weights array
with dimensions n_active(bf),
n_active(bf), and length(points).
The first two dimensions represent from and to cells of possible connections
between  pairs of locations within the BirdFlow model and both have
n_active() elements.
The third dimension represents reference points that might be between each
connection.
Cell values are the weight to use when adding the transition probabilities
to the reference point flux."><meta property="og:image" content="https://birdflow-science.github.io/BirdFlowR/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BirdFlowR</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.1.0.9066</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/BirdFlowR.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/BirdFlowOverview.html">BirdFlow Model Overview, Uses, and Limitations</a></li>
    <li><a class="dropdown-item" href="../articles/Installation.html">Detailed installation instructions</a></li>
    <li><a class="dropdown-item" href="../articles/Preprocess.html">Preprocess and sparsify</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/birdflow-science/BirdFlowR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Assign weights to points based on how close they are to the great circle line associated with each transition</h1>
      <small class="dont-index">Source: <a href="https://github.com/birdflow-science/BirdFlowR/blob/main/R/weight_between.R" class="external-link"><code>R/weight_between.R</code></a></small>
      <div class="d-none name"><code>weight_between.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This internal function is used to create a betweenness weights array
with dimensions <a href="n_active()">n_active(bf)</a>,
<a href="n_active()">n_active(bf)</a>, and <code>length(points)</code>.
The first two dimensions represent from and to cells of possible connections
between  pairs of locations within the BirdFlow model and both have
<code><a href="dimensions.html">n_active()</a></code> elements.
The third dimension represents reference points that might be between each
connection.
Cell values are the weight to use when adding the transition probabilities
to the reference point flux.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">weight_between</span><span class="op">(</span></span>
<span>  <span class="va">bf</span>,</span>
<span>  weight_fun <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  points <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  radius <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  n_directions <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  skip_unconnected <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  batch_size <span class="op">=</span> <span class="fl">1e+05</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-bf">bf<a class="anchor" aria-label="anchor" href="#arg-bf"></a></dt>
<dd><p>A BirdFlow model</p></dd>


<dt id="arg-points">points<a class="anchor" aria-label="anchor" href="#arg-points"></a></dt>
<dd><p>The points to evaluate betweenness on. If NULL the cell
centers of all the raster cells within the BirdFlow model that are between
active cells in the model will be used. This is calculated by comparing the
cell centers to a buffered convex hull around the active cell centers.</p></dd>


<dt id="arg-radius">radius<a class="anchor" aria-label="anchor" href="#arg-radius"></a></dt>
<dd><p>The probability density along a transect perpendicular to
the line and intersecting the point is summed over the inteval within
<code>radius</code> meters of the point. <code>radius</code> defaults to half the cell
size (<code>mean(res(bf))/2</code>).</p></dd>


<dt id="arg-skip-unconnected">skip_unconnected<a class="anchor" aria-label="anchor" href="#arg-skip-unconnected"></a></dt>
<dd><p>If <code>TRUE</code> then only connections that exist in <code>bf</code>
will be evaluated, and between matrix will erroneously indicate that
the weights associated with transitions that aren't used is always 0.
The resulting array can still be used with the model it was built for because
those missing connections would always have zero probability.</p></dd>


<dt id="arg-batch-size">batch_size<a class="anchor" aria-label="anchor" href="#arg-batch-size"></a></dt>
<dd><p>controls the number of movement lines that are processed
at a time. A smaller
<code>batch_size</code> will conserve memory at a slight performance cost.  The number
of batches will be less than or equal to <code>n_active(bf)^2 / batch_size</code>.</p></dd>


<dt id="arg-n-direction">n_direction<a class="anchor" aria-label="anchor" href="#arg-n-direction"></a></dt>
<dd><p>The number of (equally spaced) directional bins to
classify bearings into.  Currently only <code>1</code> is supported.</p></dd>


<dt id="arg-check-radius">check_radius<a class="anchor" aria-label="anchor" href="#arg-check-radius"></a></dt>
<dd><p>If  <code>TRUE</code> an error will be thrown if the radius
is not between the resolution and 1/4 the resolution of <code>bf</code>. Outside of
that range the algorithm is likely to yield distorted results.
<code>mean(res(bf)) / 2</code> is the default, and recommended radius.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with:</p>
<dl><dt>between</dt>
<dd><p>An array with dimensions representing the
"from" location, the "to" location, and the <code>points</code>. Cells are weights and
will be non-zero if the radius around the point intersects 1.96 standard
deviations of the normal distribution of probabilities around the great
circle line.</p></dd>

<dt>points</dt>
<dd><p>A data,frame of points that define the third dimension
in <code>between</code>.  It is identical to the input <code>points</code> if they are not <code>NULL</code>.
Otherwise it will be a data frame with columns <code>x</code>, <code>y</code>, and <code>i</code>
corresponding to the third dimension in <code>between</code>.
<code>i</code> will be <code>NA</code> for points that are not within the mask but
fall between active cells.</p></dd>

<dt>radius</dt>
<dd><p>The radius of the circle in meters.</p></dd>

</dl><p>@seealso <code><a href="is_between.html">is_between()</a></code> and <code><a href="calc_flux.html">calc_flux()</a></code></p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>If <code>points</code>  are <code>NULL</code> they default to the center of all cells within
the BirdFlow extent that fall between any active cells.
This includes all cell centers within a convex hull
(in spherical coordinates) around the active cells in <code>bf</code> and thus is
almost always more than just the active cells.</p>
<p><code>weight_between()</code> and <code><a href="is_between.html">is_between()</a></code> should only differ slightly in
their results when calculated on the same model.</p>
<p>1, The number of included reference points may differ.
2. The betweeness array will be real weights from 0 to 1 with
<code>weight_between()</code> and logical with <code><a href="is_between.html">is_between()</a></code></p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ethan Plunkett, National Science Foundation.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

