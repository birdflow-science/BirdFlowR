<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This internal function is used to create a betweenness array with dimensions
n_active(bf), n_active(bf), and length(points).
The first two dimensions from and to cells of possible connections
between  pairs of locations within the BirdFlow model and both
n_active() elements.
The third dimension represents points that might be between each
connection.
Cell values are TRUE if the point is between the associated model cells.
Specifically, if the point is within radius meters (along a great circle)
of the great circle line connecting the cell centers."><title>Determine if points are between BirdFlow cells — is_between • BirdFlowR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Determine if points are between BirdFlow cells — is_between"><meta property="og:description" content="This internal function is used to create a betweenness array with dimensions
n_active(bf), n_active(bf), and length(points).
The first two dimensions from and to cells of possible connections
between  pairs of locations within the BirdFlow model and both
n_active() elements.
The third dimension represents points that might be between each
connection.
Cell values are TRUE if the point is between the associated model cells.
Specifically, if the point is within radius meters (along a great circle)
of the great circle line connecting the cell centers."><meta property="og:image" content="https://birdflow-science.github.io/BirdFlowR/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">BirdFlowR</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.1.0.9056</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/BirdFlowR.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/BirdFlowOverview.html">BirdFlow Model Overview, Uses, and Limitations</a>
    <a class="dropdown-item" href="../articles/Installation.html">Detailed installation instructions</a>
    <a class="dropdown-item" href="../articles/Preprocess.html">Preprocess and sparsify</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/birdflow-science/BirdFlowR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Determine if points are between BirdFlow cells</h1>
      <small class="dont-index">Source: <a href="https://github.com/birdflow-science/BirdFlowR/blob/HEAD/R/is_between.R" class="external-link"><code>R/is_between.R</code></a></small>
      <div class="d-none name"><code>is_between.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This internal function is used to create a betweenness array with dimensions
<a href="n_active()">n_active(bf)</a>, <a href="n_active()">n_active(bf)</a>, and <code>length(points)</code>.
The first two dimensions from and to cells of possible connections
between  pairs of locations within the BirdFlow model and both
<code><a href="dimensions.html">n_active()</a></code> elements.
The third dimension represents <code>points</code> that might be between each
connection.
Cell values are <code>TRUE</code> if the point is between the associated model cells.
Specifically, if the point is within <code>radius</code> meters (along a great circle)
of the great circle line connecting the cell centers.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">is_between</span><span class="op">(</span></span>
<span>  <span class="va">bf</span>,</span>
<span>  points <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  radius <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  n_directions <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  skip_unconnected <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  batch_size <span class="op">=</span> <span class="fl">1e+05</span>,</span>
<span>  check_radius <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>bf</dt>
<dd><p>A BirdFlow model</p></dd>


<dt>points</dt>
<dd><p>The points to evaluate betweenness on. If NULL the cell
centers of all the raster cells within the BirdFlow model that are between
active cells in the model will be used. This is calculated by comparing the
cell centers to a buffered convex hull around the active cell centers.</p></dd>


<dt>radius</dt>
<dd><p>A point is considered between two locations if it is within
<code>radius</code> meters (along a great circle) of the great circle line between the
locations. <code>radius</code> defaults to half the cell size (<code>mean(res(bf))/2</code>).</p></dd>


<dt>skip_unconnected</dt>
<dd><p>If <code>TRUE</code> then only connections that exist in <code>bf</code>
will be evaluated, and between matrix will erroneously indicate that
no points are between locations that are not connected.
The resulting array can still be used with the model it was built for because
those missing connections would always have zero probability.</p></dd>


<dt>batch_size</dt>
<dd><p>controls the number of movement lines that are processed
at a time. A smaller
<code>batch_size</code> will conserve memory at a slight performance cost.  The number
of batches will be less than or equal to <code>n_active(bf)^2 / batch_size</code>.</p></dd>


<dt>check_radius</dt>
<dd><p>If  <code>TRUE</code> an error will be thrown if the radius
is not between the resolution and 1/4 the resolution of <code>bf</code>. Outside of
that range the algorithm is likely to yield distorted results.
<code>0.5 * mean(res(bf))</code> is the default, and recommended radius.</p></dd>


<dt>n_direction</dt>
<dd><p>The number of (equally spaced) directional bins to
classify bearings into.  Currently only <code>1</code> is supported.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A list with:</p>
<dl><dt>between</dt>
<dd><p>An array with dimensions representing the
"from" location, the "to" location, and the <code>points</code>. Cells are <code>TRUE</code>
if the point is between the associated from and to locations.</p></dd>

<dt>points</dt>
<dd><p>A data,frame of points that define the third dimension
in <code>between</code>.  It is identical to the input <code>points</code> if they are not <code>NULL</code>.
Otherwise it will be a data frame with columns <code>x</code>, <code>y</code>, and <code>i</code>
corresponding to the third dimension in <code>between</code>.
<code>i</code> will be <code>NA</code> for points that are not within the mask but
fall between active cells.</p></dd>

<dt>radius</dt>
<dd><p>The radius of the circle in meters.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>If <code>points</code> and <code>radius</code> are <code>NULL</code> they default to the cell radius and the
center of all cells within the BirdFlow extent that fall between
any active cells. This includes all cell centers within a convex hull
(in spherical coordinates) around the active cells in <code>bf</code>.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ethan Plunkett, National Science Foundation.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

