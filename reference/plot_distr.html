<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Plot distributions — plot_distr • BirdFlowR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot distributions — plot_distr"><meta name="description" content="Return a ggplot2::ggplot object with plots of one or more
distributions."><meta property="og:description" content="Return a ggplot2::ggplot object with plots of one or more
distributions."><meta property="og:image" content="https://birdflow-science.github.io/BirdFlowR/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BirdFlowR</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.1.0.9071</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/BirdFlowR.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/BirdFlowOverview.html">BirdFlow Model Overview, Uses, and Limitations</a></li>
    <li><a class="dropdown-item" href="../articles/Installation.html">Detailed installation instructions</a></li>
    <li><a class="dropdown-item" href="../articles/Polygons.html">Calculate movement among polygons</a></li>
    <li><a class="dropdown-item" href="../articles/Preprocess.html">Preprocess and sparsify</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/birdflow-science/BirdFlowR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Plot distributions</h1>
      <small class="dont-index">Source: <a href="https://github.com/birdflow-science/BirdFlowR/blob/main/R/plot_distr.R" class="external-link"><code>R/plot_distr.R</code></a></small>
      <div class="d-none name"><code>plot_distr.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Return a <a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot2::ggplot</a> object with plots of one or more
distributions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plot_distr</span><span class="op">(</span></span>
<span>  <span class="va">distr</span>,</span>
<span>  <span class="va">bf</span>,</span>
<span>  subset <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  show_mask <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  show_dynamic_mask <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  limits <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dynamic_scale <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  coast_linewidth <span class="op">=</span> <span class="fl">0.25</span>,</span>
<span>  coast_color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/gray.html" class="external-link">gray</a></span><span class="op">(</span><span class="fl">0.5</span><span class="op">)</span>,</span>
<span>  gradient_colors <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  active_cell_color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/rgb.html" class="external-link">rgb</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0.3</span><span class="op">)</span>,</span>
<span>  inactive_cell_color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/rgb.html" class="external-link">rgb</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">0.2</span><span class="op">)</span>,</span>
<span>  title <span class="op">=</span> <span class="fu"><a href="species_info.html">species</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span>,</span>
<span>  value_label <span class="op">=</span> <span class="st">"Density"</span>,</span>
<span>  transform <span class="op">=</span> <span class="st">"identity"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-distr">distr<a class="anchor" aria-label="anchor" href="#arg-distr"></a></dt>
<dd><p>A vector or matrix with distribution values corresponding to
active cells in <code>bf</code>.</p></dd>


<dt id="arg-bf">bf<a class="anchor" aria-label="anchor" href="#arg-bf"></a></dt>
<dd><p>A BirdFlow object.</p></dd>


<dt id="arg-subset">subset<a class="anchor" aria-label="anchor" href="#arg-subset"></a></dt>
<dd><p>Defines an optional subset of <code>distr</code> that should be plotted.
Use either column numbers, column names, or a logical vector.</p></dd>


<dt id="arg-show-mask">show_mask<a class="anchor" aria-label="anchor" href="#arg-show-mask"></a></dt>
<dd><p>If <code>TRUE</code> (the default) the static mask that indicates which
cells are active in the model at any timestep will be shown.</p></dd>


<dt id="arg-show-dynamic-mask">show_dynamic_mask<a class="anchor" aria-label="anchor" href="#arg-show-dynamic-mask"></a></dt>
<dd><p>Defaults to <code>FALSE</code>. Set to <code>TRUE</code> to visualize the
dynamic mask. This is achieved by overwriting cells that are dynamically
masked with NA. For <code>show_dynamic_mask = TRUE</code> to work the column names in
<code>distr</code> should all be in <code>colnames(get_distr(bf))</code>.  This is
true for distributions returned by <a href="predict.BirdFlowR"><code><a href="predict.BirdFlow.html">predict()</a></code></a>
and <code><a href="get_distr.html">get_distr()</a></code>.</p></dd>


<dt id="arg-limits">limits<a class="anchor" aria-label="anchor" href="#arg-limits"></a></dt>
<dd><p>The range of density values to map <code>gradient_colors</code> to. The
default is the range of the values in <code>distr</code> after applying <code>subset</code>. If
you want to standardize the range across multiple models of a single
species you might want to set to <code>c(0, max)</code> where <code>max</code> is the maximum
observed value across all models. Alternatively if the range is highly
variable among the columns in <code>distr</code> as when density spreads out from a
single point in the results of <a href="predict.BirdFlowR"><code>predict(bf)</code></a> you may
want to set this smaller than the full range in which case the values will
be truncated to the limits (see examples).</p></dd>


<dt id="arg-dynamic-scale">dynamic_scale<a class="anchor" aria-label="anchor" href="#arg-dynamic-scale"></a></dt>
<dd><p>Set to <code>TRUE</code> to have the range of the data in each
distribution mapped to the full color gradient. This allows visualizing the
full range of values within each timestep optimally at the cost of
consistency in the color scale among the facets - or animation frames
if using <code><a href="animate_distr.html">animate_distr()</a></code>.</p></dd>


<dt id="arg-coast-linewidth">coast_linewidth<a class="anchor" aria-label="anchor" href="#arg-coast-linewidth"></a></dt>
<dd><p>The line width to use when plotting the coast. Default
is <code>0.25</code>.  If <code>NULL</code> the coast will not be plotted.</p></dd>


<dt id="arg-coast-color">coast_color<a class="anchor" aria-label="anchor" href="#arg-coast-color"></a></dt>
<dd><p>The color to use for plotting the coastline. If <code>NULL</code> the
coast will not be plotted.</p></dd>


<dt id="arg-gradient-colors">gradient_colors<a class="anchor" aria-label="anchor" href="#arg-gradient-colors"></a></dt>
<dd><p>A color gradient that will be used to plot the density
values. Leave or set to <code>NULL</code> for the default of
<code>ebirdst::abundance_palette(10, season = "weekly")</code>.</p></dd>


<dt id="arg-active-cell-color">active_cell_color<a class="anchor" aria-label="anchor" href="#arg-active-cell-color"></a></dt>
<dd><p>The background color for active cells in the
landscape. Only used if <code>show_mask</code> is <code>TRUE</code>. These cells will only be
visible if there are <code>NA</code> values in <code>distr</code> or if <code>show_dynamic_mask</code>
is <code>TRUE</code>.</p></dd>


<dt id="arg-inactive-cell-color">inactive_cell_color<a class="anchor" aria-label="anchor" href="#arg-inactive-cell-color"></a></dt>
<dd><p>The color to use for inactive cells in the
landscape. These are cells that are always masked. Only relevant when
<code>show_mask = TRUE</code>.</p></dd>


<dt id="arg-title">title<a class="anchor" aria-label="anchor" href="#arg-title"></a></dt>
<dd><p>The title for the plot. It defaults to the common name of the
species (<code>species(bf)</code>).</p></dd>


<dt id="arg-value-label">value_label<a class="anchor" aria-label="anchor" href="#arg-value-label"></a></dt>
<dd><p>The label used for the values in the distribution.
Defaults to "Density"</p></dd>


<dt id="arg-transform">transform<a class="anchor" aria-label="anchor" href="#arg-transform"></a></dt>
<dd><p>A transformation to apply to the color scaling. Recommended
<code>"identity"</code>, and <code>"sqrt"</code>.  If <code>"log"</code> is used zeros will be replaced with
1/2 the smallest non-zero value prior to transforming.
mapping to the color gradient. Legend will still reflect the original values.
Passed to <code><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html" class="external-link">ggplot2::scale_color_gradientn()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot2::ggplot()</a></code> object.  Use <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> to render it.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>

<div class="section">
<h3 id="masks">Masks<a class="anchor" aria-label="anchor" href="#masks"></a></h3>


<p>BirdFlow objects have both a mask and a dynamic
mask. For any given timestep the model only covers cells that aren't excluded
by either of these masks.</p><ul><li><p><strong>mask</strong> The static mask, AKA "mask", indicates which cells
in the raster extent are included in the model at any timestep these are
also called active cells (e.g. <code><a href="dimensions.html">n_active()</a></code>). The number of elements in a
distribution always match the number of unmasked cells in the (static) mask.
Cells are masked if they always have zero abundance in the Bird S&amp;T data
for every week of the year.</p></li>
<li><p><strong>dynamic mask</strong> The dynamic mask indicates which of the cells not excluded
by the static mask are modeled within each timestep. It,like distributions,
only has values for active cells. Thus the dimensions of objects returned
by <a href="get_dynamic_mask()">get_dynamic_mask(bf)</a> and get
<a href="get_distr()">get_distr(bf)</a> will be identical.
The purpose of the dynamic mask is to improve efficiency of fitting,
storing, and using BirdFlow models by eliminating unlikely locations
in the model.  The dynamic mask includes cells that have a zero in the
eBird S&amp;T abundance for the associated week.</p></li>
</ul><p>To display both masks set <code>show_dynamic_mask</code> to <code>TRUE</code> and leave
<code>show_mask</code> at it's default (<code>TRUE</code>).  Showing the dynamic mask relies on
matching the columns names of the distribution to timesteps in the model so
requires that the column names match the column names in <code><a href="get_distr.html">get_distr()</a></code>.</p>
</div>

<div class="section">
<h3 id="subtitles">Subtitles<a class="anchor" aria-label="anchor" href="#subtitles"></a></h3>


<p>Plot subtitles will be derived from the column names in <code>distr</code>. It may be
useful to define single distributions as a one column matrix so that the
label information is there. For example if <code>d</code> is a distribution in a
matrix with multiple columns use <code>drop=FALSE</code> while subsetting,
<code>plot_distr(d[, 1, drop = FALSE], bf)</code>; and to add a label to a vector
distribution use <code>d &lt;- matrix(d, ncol = 1);  colnames(d) &lt;- "new label"</code></p>
</div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index">
<ul><li><p><code><a href="animate_distr.html">animate_distr()</a></code> for animating distributions.</p></li>
<li><p><code><a href="plot_routes.html">plot_routes()</a></code> and  <code><a href="animate_routes.html">animate_routes()</a></code> for visualizing routes.</p></li>
<li><p><code><a href="as_distr.html">as_distr()</a></code>, <code><a href="get_distr.html">get_distr()</a></code>, <a href="predict.BirdFlow"><code><a href="predict.BirdFlow.html">predict()</a></code></a>
for functions that produce distributions.</p></li>
</ul></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">bf</span> <span class="op">&lt;-</span> <span class="fu">BirdFlowModels</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/BirdFlowModels/man/BirdFlowModels.html" class="external-link">amewoo</a></span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu">plot_distr</span><span class="op">(</span><span class="fu"><a href="get_distr.html">get_distr</a></span><span class="op">(</span><span class="va">bf</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">11</span>, <span class="fl">21</span><span class="op">)</span><span class="op">)</span>, <span class="va">bf</span>, show_dynamic_mask <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ethan Plunkett, National Science Foundation.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

