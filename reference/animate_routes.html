<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Animate routes — animate_routes • BirdFlowR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Animate routes — animate_routes"><meta name="description" content="Animate synthetic routes produced by route() and route_migration(),
producing a dynamic version of plot_routes()."><meta property="og:description" content="Animate synthetic routes produced by route() and route_migration(),
producing a dynamic version of plot_routes()."><meta property="og:image" content="https://birdflow-science.github.io/BirdFlowR/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BirdFlowR</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.1.0.9070</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/BirdFlowR.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/BirdFlowOverview.html">BirdFlow Model Overview, Uses, and Limitations</a></li>
    <li><a class="dropdown-item" href="../articles/Installation.html">Detailed installation instructions</a></li>
    <li><a class="dropdown-item" href="../articles/Polygons.html">Calculate movement among polygons</a></li>
    <li><a class="dropdown-item" href="../articles/Preprocess.html">Preprocess and sparsify</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/birdflow-science/BirdFlowR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Animate routes</h1>
      <small class="dont-index">Source: <a href="https://github.com/birdflow-science/BirdFlowR/blob/main/R/animate_routes.R" class="external-link"><code>R/animate_routes.R</code></a></small>
      <div class="d-none name"><code>animate_routes.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Animate synthetic routes produced by <code><a href="route.html">route()</a></code> and <code><a href="route_migration.html">route_migration()</a></code>,
producing a dynamic version of <code><a href="plot_routes.html">plot_routes()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">animate_routes</span><span class="op">(</span><span class="va">routes</span>, <span class="va">bf</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-routes">routes<a class="anchor" aria-label="anchor" href="#arg-routes"></a></dt>
<dd><p>An object of class <code>Routes</code> or  <code>BirdFlowRoutes</code>.  Likely the
the output of  <code><a href="route.html">route()</a></code>, <a href="as_BirdFlowRoutes.html">as_BirdFlowRoutes</a>, or <code><a href="Routes.html">Routes()</a></code>.</p></dd>


<dt id="arg-bf">bf<a class="anchor" aria-label="anchor" href="#arg-bf"></a></dt>
<dd><p>A BirdFlow object</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed on to <code><a href="plot_routes.html">plot_routes</a></code></p><dl><dt><code>facet</code></dt>
<dd><p>If <code>TRUE</code> then use <code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">ggplot2::facet_wrap()</a></code> to show each route
out into a separate subplot.</p></dd>

    <dt><code>max_stay_len</code></dt>
<dd><p>Used to scale the stay length dots. If <code>NULL</code>
(the default) it will be set to the maximum <code>"stay_len"</code> value in <code>routes</code>.
Set it manually to keep the dot scaling consistent across multiple plots.</p></dd>

    <dt><code>use_seasonal_colors</code></dt>
<dd><p>If <code>TRUE</code> a color scale that uses blues, greens,
yellows, reds, for winter, spring, summer, and fall will be used with a
consistent mapping of dates to colors regardless of the range of dates
plotted. If <code>FALSE</code> then the data will be plotted using the full color scale.</p></dd>

    <dt><code>pal</code></dt>
<dd><p>The color palette to use for plotting when <code>use_seasonal_cols</code> is
<code>FALSE</code>. Defaults to <a href="https://sjmgarnier.github.io/viridisLite/reference/viridis.html" class="external-link">viridisLite::viridis(n = 5)</a>.</p></dd>

    <dt><code>barheight</code></dt>
<dd><p>The height of the color gradient legend bar. Passed to
<code><a href="https://ggplot2.tidyverse.org/reference/guide_colourbar.html" class="external-link">ggplot2::guide_colorbar()</a></code> as <code>barheight</code> argument. Depending on the output
resolution and plot size this may need to be adjusted. Can take a number or
the output from <code><a href="https://ggplot2.tidyverse.org/reference/reexports.html" class="external-link">ggplot2::unit()</a></code>.</p></dd>

    <dt><code>route_linewidth</code></dt>
<dd><p>Line width used for routes.</p></dd>

    <dt><code>coast_linewidth</code></dt>
<dd><p>Line width used for coastlines.</p></dd>

    <dt><code>dot_sizes</code></dt>
<dd><p>Two numbers indicating the smallest and largest dot sizes
used to represent stay length.</p></dd>

    <dt><code>stay_units</code></dt>
<dd><p>The unit to plot the stay length at each location. Default
to <code>weeks</code>. Other options include <code>sec</code>, <code>mins</code>, <code>hours</code>, <code>days</code> and <code>weeks</code>.</p></dd>

    <dt><code>show_mask</code></dt>
<dd><p>Should the BirdFlow Model's (<code>bf</code>) static mask be displayed.</p></dd>

    <dt><code>crs</code></dt>
<dd><p>Only used when <code>bf</code> is missing.  <code>crs</code> sets the Coordinate
Reference system used for plotting. See <code><a href="https://rspatial.github.io/terra/reference/crs.html" class="external-link">terra::crs()</a></code>.</p></dd>

    <dt><code>static</code></dt>
<dd><p>For internal use. It is set to <code>FALSE</code> when <code><a href="plot_routes.html">plot_routes()</a></code> is
called from <code>animate_routes()</code>.</p></dd>


</dl></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>gganim</code> object. <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> will plot it with default
options, or use <code>animate()</code> to set the options. See the example for
recommended settings.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Note when rendering early frames (at a minimum the first) there will only
one point per route, resulting in a message:
"geom_path(): Each group consists of only one observation.
ℹ Do you need to adjust the group aesthetic?"
This will possibly be repeated while individuals remain in one location.
It can be safely ignored. The error is thrown while rendering and not
from within <code>animate_routes()</code> so cannot be suppressed by code in
<span class="pkg">BirdFlowR</span>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">bf</span> <span class="op">&lt;-</span> <span class="fu">BirdFlowModels</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/BirdFlowModels/man/BirdFlowModels.html" class="external-link">amewoo</a></span></span></span>
<span class="r-in"><span><span class="va">rts</span> <span class="op">&lt;-</span> <span class="fu"><a href="route.html">route</a></span><span class="op">(</span><span class="va">bf</span>, <span class="fl">10</span>,  season <span class="op">=</span> <span class="st">"prebreeding"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">anim</span> <span class="op">&lt;-</span> <span class="fu">animate_routes</span><span class="op">(</span><span class="va">rts</span>, <span class="va">bf</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span>  <span class="co"># example render</span></span></span>
<span class="r-in"><span>  <span class="va">timesteps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">rts</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">timestep</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="va">gif</span> <span class="op">&lt;-</span> <span class="fu">gganimate</span><span class="fu">::</span><span class="fu"><a href="https://gganimate.com/reference/animate.html" class="external-link">animate</a></span><span class="op">(</span><span class="va">anim</span>,</span></span>
<span class="r-in"><span>                            device <span class="op">=</span> <span class="st">"ragg_png"</span>, <span class="co"># is fast and pretty</span></span></span>
<span class="r-in"><span>                            width <span class="op">=</span> <span class="fl">7</span>, height <span class="op">=</span> <span class="fl">6</span>,</span></span>
<span class="r-in"><span>                            res <span class="op">=</span> <span class="fl">150</span>, units <span class="op">=</span> <span class="st">"in"</span>,</span></span>
<span class="r-in"><span>                            nframes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">timesteps</span><span class="op">)</span> <span class="op">*</span> <span class="fl">4</span>, fps <span class="op">=</span> <span class="fl">8</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Display</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">gif</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Save</span></span></span>
<span class="r-in"><span>  <span class="va">gif_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"animation"</span>, fileext <span class="op">=</span> <span class="st">".gif"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">gganimate</span><span class="fu">::</span><span class="fu"><a href="https://gganimate.com/reference/save_animation.html" class="external-link">save_animation</a></span><span class="op">(</span><span class="va">gif</span>, <span class="va">gif_file</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.remove</a></span><span class="op">(</span><span class="va">gif_file</span><span class="op">)</span> <span class="co"># cleanup</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ethan Plunkett, National Science Foundation.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

