<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Are locations and distributions covered by the model for the given time — is_location_valid • BirdFlowR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Are locations and distributions covered by the model for the given time — is_location_valid"><meta name="description" content="A location or and time is valid if the model has a non zero probability  of
movement into and out of that location at that time. An invalid state
either has zero probability of movement into and out of it, or isn't covered
by the model at all. Similarly distributions are valid if all of the
probability is in cells for which movement is modeled."><meta property="og:description" content="A location or and time is valid if the model has a non zero probability  of
movement into and out of that location at that time. An invalid state
either has zero probability of movement into and out of it, or isn't covered
by the model at all. Similarly distributions are valid if all of the
probability is in cells for which movement is modeled."><meta property="og:image" content="https://birdflow-science.github.io/BirdFlowR/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BirdFlowR</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.1.0.9069</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/BirdFlowR.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/BirdFlowOverview.html">BirdFlow Model Overview, Uses, and Limitations</a></li>
    <li><a class="dropdown-item" href="../articles/Installation.html">Detailed installation instructions</a></li>
    <li><a class="dropdown-item" href="../articles/Polygons.html">Calculate movement among polygons</a></li>
    <li><a class="dropdown-item" href="../articles/Preprocess.html">Preprocess and sparsify</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/birdflow-science/BirdFlowR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Are locations and distributions covered by the model for the given time</h1>
      <small class="dont-index">Source: <a href="https://github.com/birdflow-science/BirdFlowR/blob/main/R/is_location_valid.R" class="external-link"><code>R/is_location_valid.R</code></a></small>
      <div class="d-none name"><code>is_location_valid.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A location or and time is valid if the model has a non zero probability  of
movement into and out of that location at that time. An invalid state
either has zero probability of movement into and out of it, or isn't covered
by the model at all. Similarly distributions are valid if all of the
probability is in cells for which movement is modeled.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">is_location_valid</span><span class="op">(</span><span class="va">bf</span>, <span class="va">i</span>, <span class="va">x</span>, <span class="va">y</span>, <span class="va">timestep</span>, <span class="va">date</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">is_distr_valid</span><span class="op">(</span><span class="va">bf</span>, <span class="va">distr</span>, <span class="va">timestep</span>, <span class="va">date</span>, return_mask <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-bf">bf<a class="anchor" aria-label="anchor" href="#arg-bf"></a></dt>
<dd><p>A BirdFlow object.</p></dd>


<dt id="arg-i">i<a class="anchor" aria-label="anchor" href="#arg-i"></a></dt>
<dd><p>State space index (location).</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>X coordinates in the <code>bf</code>'s CRS (<a href="https://rspatial.github.io/terra/reference/crs.html" class="external-link">crs(bf)</a>).</p></dd>


<dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>T coordinate.</p></dd>


<dt id="arg-timestep">timestep<a class="anchor" aria-label="anchor" href="#arg-timestep"></a></dt>
<dd><p>The timestep.</p></dd>


<dt id="arg-date">date<a class="anchor" aria-label="anchor" href="#arg-date"></a></dt>
<dd><p>Date in any format accepted by <code><a href="lookup_timestep.html">lookup_timestep()</a></code>.</p></dd>


<dt id="arg-distr">distr<a class="anchor" aria-label="anchor" href="#arg-distr"></a></dt>
<dd><p>One or more distributions in vector or matrix form representing
a probability for each active cell in the model.</p></dd>


<dt id="arg-return-mask">return_mask<a class="anchor" aria-label="anchor" href="#arg-return-mask"></a></dt>
<dd><p>If TRUE return a mask with the same dimensions as <code>distr</code>
which is TRUE for all cells that can have valid non-zero values. This is
conditioned on the timestep associated with each distribution.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A logical vector, 'TRUE<code>if valid</code>FALSE<code>otherwise with values for each input location or distribution. See</code>return_mask` for an exception.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>For <code>is_location_valid()</code> there are 2 ways of inputting locations. Only
one should be used: either <code>i</code> a vector of location indices
(see <code><a href="index_conversions.html">xy_to_i()</a></code>), or <code>x</code> and <code>y</code>.</p>
<p>For both functions time should be input either as <code>timestep</code> or <code>date</code>.</p>
<p>The number of timesteps or dates should either be 1 or match to the number
of locations or distributions; if singular it will be applied to all.</p>
<p>A location is invalid if any of the following apply:</p><ol><li><p>The location isn't in the model extent.</p></li>
<li><p>The location doesn't correspond to an active cell in the model;
it's masked out by the static mask.</p></li>
<li><p>The location isn't a valid state at the given timestep or date; it's
excluded by the dynamic mask or by state or other sparsification see
<code><a href="sparsify.html">sparsify()</a></code>.</p></li>
<li><p>The timestep isn't valid, or the date doesn't have an associated
timestep. The second applies only to BirdFlow models that don't cover the
whole year.</p></li>
</ol><p>A distribution is invalid for similar reasons but applied to all the
locations that have non-zero values.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">bf</span> <span class="op">&lt;-</span> <span class="fu">BirdFlowModels</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/BirdFlowModels/man/BirdFlowModels.html" class="external-link">amewoo</a></span></span></span>
<span class="r-in"><span><span class="va">timestep</span>  <span class="op">&lt;-</span> <span class="fl">3</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Sample two valid locations from a distribution</span></span></span>
<span class="r-in"><span><span class="va">distr</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_distr.html">get_distr</a></span><span class="op">(</span><span class="va">bf</span>, <span class="va">timestep</span>, from_marginals <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">locs</span> <span class="op">&lt;-</span> <span class="fu"><a href="sample_distr.html">sample_distr</a></span><span class="op">(</span><span class="va">distr</span>, n <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">i</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">locs</span>, <span class="fl">2</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">as.logical</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">is_location_valid</span><span class="op">(</span><span class="va">bf</span>, <span class="va">i</span>, timestep <span class="op">=</span> <span class="va">timestep</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Sample a few invalid locations</span></span></span>
<span class="r-in"><span><span class="va">i</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/which.html" class="external-link">which</a></span><span class="op">(</span><span class="va">distr</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">is_location_valid</span><span class="op">(</span><span class="va">bf</span>, <span class="va">i</span>, timestep <span class="op">=</span> <span class="va">timestep</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE FALSE</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ethan Plunkett, National Science Foundation.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

