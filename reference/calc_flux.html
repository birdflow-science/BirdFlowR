<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate Bird Flow Migration Traffic Rate — calc_flux • BirdFlowR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate Bird Flow Migration Traffic Rate — calc_flux"><meta name="description" content="DEPRECATED FUNCTION.  Please use calc_bmtr() instead."><meta property="og:description" content="DEPRECATED FUNCTION.  Please use calc_bmtr() instead."><meta property="og:image" content="https://birdflow-science.github.io/BirdFlowR/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BirdFlowR</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.1.0.9077</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/BirdFlowR.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/BirdFlowOverview.html">BirdFlow Model Overview, Uses, and Limitations</a></li>
    <li><a class="dropdown-item" href="../articles/Installation.html">Detailed installation instructions</a></li>
    <li><a class="dropdown-item" href="../articles/Polygons.html">Calculate movement among polygons</a></li>
    <li><a class="dropdown-item" href="../articles/Preprocess.html">Preprocess and sparsify</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/birdflow-science/BirdFlowR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Calculate Bird Flow Migration Traffic Rate</h1>
      <small class="dont-index">Source: <a href="https://github.com/birdflow-science/BirdFlowR/blob/main/R/calc_bmtr.R" class="external-link"><code>R/calc_bmtr.R</code></a></small>
      <div class="d-none name"><code>calc_flux.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>DEPRECATED FUNCTION.  Please use <code><a href="calc_bmtr.html">calc_bmtr()</a></code> instead.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calc_flux</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed on to <code><a href="calc_bmtr.html">calc_bmtr</a></code></p><dl><dt><code>bf</code></dt>
<dd><p>A BirdFlow model</p></dd>

    <dt><code>points</code></dt>
<dd><p>A set of points to calculate movement through. If <code>points</code> is
<code>NULL</code> they will default to the BirdFlow model cells that are either active
or fall between two active cells. Otherwise a data frame with <code>x</code> and  <code>y</code>
columns containing point coordinates in <a href="https://rspatial.github.io/terra/reference/crs.html" class="external-link">crs(bf)</a>.</p></dd>

    <dt><code>radius</code></dt>
<dd><p>The radius in meters around the points used to assess whether
a movement line passes by (or through) the point. If a point is farther than
<code>radius</code> from a great circle line between two cells centers then it is not
between them.</p></dd>

    <dt><code>n_directions</code></dt>
<dd><p>The number of directional bins to use for recording
movement direction. Must be either <code>1</code> indicating no direction information
or an even number. This is a placeholder, currently only <code>1</code> is supported.</p></dd>

    <dt><code>format</code></dt>
<dd><p>The format to return the results in one of:</p><dl><dt><code>"points"</code></dt>
<dd><p>Returns a list with <code>bmtr</code> a matrix or array of
bmtr values, and <code>points</code> a data frame of either the input <code>points</code> or the
default cell center derived points.</p></dd>

<dt><code>"dataframe"</code></dt>
<dd><p>Returns a "long" data frame with columns:</p><ul><li><p><code>x</code> and <code>y</code> coordinates of the points.</p></li>
<li><p><code>transition</code> Transition code.</p></li>
<li><p><code>bmtr</code> The bmtr at the point. See "Units" below  .</p></li>
<li><p><code>date</code> The date associated with the transition, will be at the midpoint
between timesteps.</p></li>
</ul></dd>

<dt><code>"SpatRaster"</code></dt>
<dd><p>Returns a <code><a href="https://rspatial.github.io/terra/reference/SpatRaster-class.html" class="external-link">terra::SpatRaster</a></code> with layers for each
transition.</p></dd>


</dl></dd>

    <dt><code>weighted</code></dt>
<dd><p>If <code>FALSE</code> use the original and quicker version of bmtr
that sums all the marginal probability for transitions that pass within a
fixed distance of the point.  If <code>TRUE</code> assign a weight to the point and
transition combo that then is multiplied by the marginal probability before
summing.  This argument is experimental but the default value is identical
to the old version. The argument name and behavior when set to <code>TRUE</code> may
change.</p></dd>

    <dt><code>batch_size</code></dt>
<dd><p>controls the number of movement lines that are processed
at a time. A smaller
<code>batch_size</code> will conserve memory at a slight performance cost.  The number
of batches will be less than or equal to <code>n_active(bf)^2 / batch_size</code>.</p></dd>

    <dt><code>check_radius</code></dt>
<dd><p>If  <code>TRUE</code> an error will be thrown if the radius
is not between the resolution and 1/4 the resolution of <code>bf</code>. Outside of
that range the algorithm is likely to yield distorted results.
<code>0.5 * mean(res(bf))</code> is the default, and recommended radius.</p></dd>


</dl></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>See <code>format</code> argument.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ethan Plunkett, National Science Foundation.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

