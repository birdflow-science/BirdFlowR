<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • BirdFlowR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="https://birdflow-science.github.io/BirdFlowR/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BirdFlowR</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.1.0.9073</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/BirdFlowR.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/BirdFlowOverview.html">BirdFlow Model Overview, Uses, and Limitations</a></li>
    <li><a class="dropdown-item" href="../articles/Installation.html">Detailed installation instructions</a></li>
    <li><a class="dropdown-item" href="../articles/Polygons.html">Calculate movement among polygons</a></li>
    <li><a class="dropdown-item" href="../articles/Preprocess.html">Preprocess and sparsify</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/birdflow-science/BirdFlowR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/birdflow-science/BirdFlowR/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9073" id="birdflowr-0109073">BirdFlowR 0.1.0.9073<a class="anchor" aria-label="anchor" href="#birdflowr-0109073"></a></h2>
<p>2025-05-09</p>
<ul><li>
<code><a href="../reference/Routes.html">Routes()</a></code> now works with species for which the eBird quality assessment is low. Previously it applied the default quality checks used by <code><a href="../reference/preprocess_species.html">preprocess_species()</a></code>.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9072" id="birdflowr-0109072">BirdFlowR 0.1.0.9072<a class="anchor" aria-label="anchor" href="#birdflowr-0109072"></a></h2>
<p>2025-04-28</p>
<p>Add <code>timeout</code> argument to <code><a href="../reference/load_model.html">load_model()</a></code> and set default to 10 minutes. Previously R’s global <code>timeout</code> option was used which defaults to 1 minute. This should fix the <a href="https://github.com/birdflow-science/BirdFlowR/issues/211" class="external-link">timeout issue</a> that some users experienced with <code><a href="../reference/load_model.html">load_model()</a></code>.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9071" id="birdflowr-0109071">BirdFlowR 0.1.0.9071<a class="anchor" aria-label="anchor" href="#birdflowr-0109071"></a></h2>
<p>2025-04-16 * Add <code><a href="../reference/dynamic_mask_index_conversions.html">dmi_to_i()</a></code> and <code><a href="../reference/dynamic_mask_index_conversions.html">i_to_dmi()</a></code> to convert between standard location indices (<code>i</code>) and dynamic mask indices (<code>dmi</code>).</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9070" id="birdflowr-0109070">BirdFlowR 0.1.0.9070<a class="anchor" aria-label="anchor" href="#birdflowr-0109070"></a></h2>
<p>2025-04-16</p>
<p>This update defines several classes for storing both real and synthetic movement data and functions to work with those classes.</p>
<div class="section level3">
<h3 id="new-classes-0-1-0-9070">New Classes<a class="anchor" aria-label="anchor" href="#new-classes-0-1-0-9070"></a></h3>
<p>There are three important classes defined in this update.</p>
<ul><li>
<code>Routes</code> contain full-precision information on bird movements in a standard format.<code>Routes</code> objects can contain information on multiple birds and they can mix route types, but each object can only contain information on a single species species.</li>
<li>
<code>BirdFlowRoutes</code> contain either synthetic or real bird movements that align with the cell and week centers of a <code>BirdFlow</code> model and contain at most one observation per week for each bird.</li>
<li>
<code>BirdFlowIntervals</code> represent sampled intervals from <code>BirdFlowRoutes</code>. Each row within the object contain a movement between a starting and ending location and time. The start and end time cannot be the same but the locations can. <code>BirdFlowIntervals</code> are intended to be used to evaluate the performance of a Bird Flow model.</li>
</ul><p>Thus the flow of data is</p>
<pre><code><span> <span class="va">bird_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/Routes.html">Routes</a></span><span class="op">(</span>species <span class="op">=</span> <span class="va">species</span><span class="op">)</span> <span class="op">|&gt;</span>     <span class="co"># Routes</span></span>
<span>  <span class="fu"><a href="../reference/as_BirdFlowRoutes.html">as_BirdFlowRoutes</a></span><span class="op">(</span>bf <span class="op">=</span> <span class="va">bd</span><span class="op">)</span> <span class="op">|&gt;</span>    <span class="co"># BirdFlowRoutes</span></span>
<span>  <span class="fu"><a href="../reference/as_BirdFlowIntervals.html">as_BirdFlowIntervals</a></span><span class="op">(</span>n <span class="op">=</span> <span class="va">n</span><span class="op">)</span> <span class="op">|&gt;</span>   <span class="co"># BirdFlowIntervals</span></span>
<span>  <span class="fu"><a href="../reference/calculate_interval_metrics.html">calculate_interval_metrics</a></span><span class="op">(</span><span class="op">)</span>      <span class="co"># metrics</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="new-public-functions-0-1-0-9070">New public functions<a class="anchor" aria-label="anchor" href="#new-public-functions-0-1-0-9070"></a></h3>
<ul><li>
<code><a href="../reference/Routes.html">Routes()</a></code> creates a <code>Routes</code> object from bird movement data and requires the species name, and a data frame with columns: <code>route_id</code>, <code>date</code>, <code>lon</code>, <code>lat</code>, and <code>route_type</code>.</li>
<li>
<code><a href="../reference/as_BirdFlowRoutes.html">as_BirdFlowRoutes()</a></code> converts <code>Routes</code> into <code>BirdFlowRoutes</code>.</li>
<li>
<code><a href="../reference/as_BirdFlowIntervals.html">as_BirdFlowIntervals()</a></code> samples <code>BirdFlowRoutes</code> to make <code>BirdFlowIntervals</code>
</li>
<li>
<code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> methods for the new classes.</li>
<li>
<code><a href="../reference/calculate_interval_metrics.html">calculate_interval_metrics()</a></code> calculates performance metrics for a <code>BirdFlow</code> model based on the movements from the <code>BirdFlowInterals</code>. This is a prototype and the output format and arguments may change.</li>
</ul></div>
<div class="section level3">
<h3 id="updated-functions-0-1-0-9070">Updated Functions<a class="anchor" aria-label="anchor" href="#updated-functions-0-1-0-9070"></a></h3>
<ul><li>
<code><a href="../reference/route.html">route()</a></code> now produces the objects in the revised <code>BirdFlowRoutes</code> class.</li>
<li>
<code><a href="../reference/plot_routes.html">plot_routes()</a></code> and the <code>plot</code> methods for <code>Routes</code> and <code>BirdFlowRoutes</code> all use the same code and have been updated to work with the both route classes. Note: this adds the new capability of plotting bird tracking data with <code><a href="../reference/plot_routes.html">plot_routes()</a></code> which previously wasn’t possible.</li>
<li>Similarly <code><a href="../reference/animate_routes.html">animate_routes()</a></code> now works with both <code>Routes</code> and <code>BirdFlowRoutes</code> and so can also be used on real movement data.</li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-0-1-0-9070">Breaking Changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-1-0-9070"></a></h3>
<ul><li>
<code><a href="../reference/route.html">route()</a></code> now produces objects of the revised <code>BirdFlowRoutes</code> class. This class is based on a list object with the primary data within <code>$data</code>.</li>
<li>Old route objects will no longer plot with the updated <code><a href="../reference/plot_routes.html">plot_routes()</a></code> or <code><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot()</a></code>.</li>
<li>Anyone using <code><a href="../reference/plot_routes.html">plot_routes()</a></code> to plot data not generated with <code><a href="../reference/route.html">route()</a></code> will have to update their objects. Use <code><a href="../reference/Routes.html">Routes()</a></code> followed by <code><a href="../reference/as_BirdFlowRoutes.html">as_BirdFlowRoutes()</a></code> to convert data to the new classes.</li>
<li>
<code><a href="../reference/snap_to_birdflow.html">snap_to_birdflow()</a></code> no longer coerces date-time input to dates before aggregating, and, if the input is date-time the output will be as well.</li>
</ul><blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>main</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9069" id="birdflowr-0109069">BirdFlowR 0.1.0.9069<a class="anchor" aria-label="anchor" href="#birdflowr-0109069"></a></h2>
<p>2024-10-17</p>
<p>Add vignette for calculating movement among polygons from a BirdFlow model.</p>
<p>Drop Callaghan abundance data and <code>get_population()</code>. Partners in Flight data is preferred, and users are encouraged to get data directly from them.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9068" id="birdflowr-0109068">BirdFlowR 0.1.0.9068<a class="anchor" aria-label="anchor" href="#birdflowr-0109068"></a></h2>
<p>2024-09-24</p>
<p>Move <code>build_collection_index()</code> to <strong>BirdFlowPipeline</strong></p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9067" id="birdflowr-0109067">BirdFlowR 0.1.0.9067<a class="anchor" aria-label="anchor" href="#birdflowr-0109067"></a></h2>
<p>2024-07-24</p>
<div class="section level3">
<h3 id="probabilistic-flux-0-1-0-9067">Probabilistic flux<a class="anchor" aria-label="anchor" href="#probabilistic-flux-0-1-0-9067"></a></h3>
<p><strong>Note</strong> this version adds the machinery for calculating probabilistic flux but the parameterization is not yet right and it will likely need some optimization to run on non-trivial models.</p>
<ul><li>Add <code><a href="../reference/weight_between.html">weight_between()</a></code> which returns betweenness weights in a manner similar to <code><a href="../reference/is_between.html">is_between()</a></code>.</li>
<li>Add <code>calc_distance_weights()</code>,<code>calc_martern_variance()</code> and some related helper functions that support <code><a href="../reference/weight_between.html">weight_between()</a></code>
</li>
<li>Update <code><a href="../reference/calc_flux.html">calc_flux()</a></code> with argument <code>weighted</code> which switches between the old binary betweenness with linear paths and the new probabilistic flux with weighted betweenness in which the probability spreads in the middle of the transition path and spreads more for longer paths.<br></li>
<li>Add <code>data-raw/martern_parameters.R</code> which helps visualize how parameters and functional forms affect weights.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9066" id="birdflowr-0109066">BirdFlowR 0.1.0.9066<a class="anchor" aria-label="anchor" href="#birdflowr-0109066"></a></h2>
<p>2024-07-11</p>
<p>Add <code><a href="../reference/plot_loss.html">plot_loss()</a></code> to plot the change in the total loss and three loss components during fitting. It relies on metadata added to the HDF5 file by BirdFlowPy.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9065" id="birdflowr-0109065">BirdFlowR 0.1.0.9065<a class="anchor" aria-label="anchor" href="#birdflowr-0109065"></a></h2>
<p>2024-06-14</p>
<p>Add <code>trim_quantile</code> argument to <code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> and <code><a href="../reference/process_rasters.html">process_rasters()</a></code> to allow trimming values above a quantile in the values to the quantile’s value. E.g. with <code>trim_quantile = 0.99</code> any value above the 99th percentile will be trimmed to value of the 99th percentile.</p>
<p>The motivation is to trim high outliers when they are believed to be artifacts of the S&amp;T models and eBird data. Robins are a good example.</p>
<p>Closes <a href="https://github.com/birdflow-science/BirdFlowR/issues/198" class="external-link">#198</a> “Outliers”.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9064" id="birdflowr-0109064">BirdFlowR 0.1.0.9064<a class="anchor" aria-label="anchor" href="#birdflowr-0109064"></a></h2>
<p>2024-06-14</p>
<p>Fix <a href="https://github.com/birdflow-science/BirdFlowR/issues/191" class="external-link">#191</a> Date lookup now works for seasons that start and end on the same day.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9063" id="birdflowr-0109063">BirdFlowR 0.1.0.9063<a class="anchor" aria-label="anchor" href="#birdflowr-0109063"></a></h2>
<p>2024-06-12</p>
<p>Fix <a href="https://github.com/birdflow-science/BirdFlowR/issues/168" class="external-link">#168</a> – allow <code>NA</code> in species date fields as in Magnificent Frigate bird.</p>
<ul><li>Replace <code>NA</code> with <code>$species</code> with empty string before writing to HDF5 with <code><a href="../reference/export_import_birdflow.html">export_birdflow()</a></code>
</li>
<li>Replace empty string with <code>NA</code> when reading <code>$species</code> items in <code><a href="../reference/export_import_birdflow.html">import_birdflow()</a></code>.</li>
<li>Throw meaningful error within <code><a href="../reference/lookup_season_timesteps.html">lookup_season_timesteps()</a></code> when the required date in <code>bf$species</code> is <code>NA</code>. This affects lots of functions that allow specifying date ranges with <code>season =</code>. This includes <code><a href="../reference/predict.BirdFlow.html">predict()</a></code>, <code><a href="../reference/route.html">route()</a></code>, <code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code>, and <code><a href="../reference/truncate_birdflow.html">truncate_birdflow()</a></code>.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9062" id="birdflowr-0109062">BirdFlowR 0.1.0.9062<a class="anchor" aria-label="anchor" href="#birdflowr-0109062"></a></h2>
<p>2024-06-07</p>
<ul><li>Updated code coverage github action in attempt to fix broken upload to codecov.io despite the coverage action running and generating the coverage data.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9061" id="birdflowr-0109061">BirdFlowR 0.1.0.9061<a class="anchor" aria-label="anchor" href="#birdflowr-0109061"></a></h2>
<p>2024-06-05</p>
<ul><li>Add <code><a href="../reference/suppress_specific_warnings.html">suppress_specific_warnings()</a></code> internal function.</li>
<li>Update <code><a href="../reference/plot_distr.html">plot_distr()</a></code>, <code>plot_route()</code>, and <code><a href="../reference/plot_flux.html">plot_flux()</a></code> so that they work with BirdFlow models in which the extent does not overlap the coast. <code>bcrfin</code>, Brown-capped Rosy-Finch is one example.</li>
<li>Add <code>transform</code> argument to <code><a href="../reference/plot_flux.html">plot_flux()</a></code> and <code><a href="../reference/plot_distr.html">plot_distr()</a></code> to allow log (<code>"log"</code>) and square route (<code>"sqrt"</code>) transformations prior to applying the color scale. These allow differentiating the smaller differences better. I think the square route transformation might be the way to go.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9060" id="birdflowr-0109060">BirdFlowR 0.1.0.9060<a class="anchor" aria-label="anchor" href="#birdflowr-0109060"></a></h2>
<p>2024-05-15</p>
<ul><li>Update <code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> <code>crs</code> argument so that it accepts objects of class <code>crs</code> as produced by [sf::st_crs()].</li>
<li>Fix bug in <code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> that prevented clipping to irregular polygons.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9059" id="birdflowr-0109059">BirdFlowR 0.1.0.9059<a class="anchor" aria-label="anchor" href="#birdflowr-0109059"></a></h2>
<p>2024-05-15</p>
<ul><li>Added <code>callaghan_abundance</code> dataset on species populations.</li>
<li>Added <code>get_population()</code> function.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9058" id="birdflowr-0109058">BirdFlowR 0.1.0.9058<a class="anchor" aria-label="anchor" href="#birdflowr-0109058"></a></h2>
<p>2024-05-07</p>
<ul><li>Fixed bug that prevented knitting example collection index without passed parameters.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9057" id="birdflowr-0109057">BirdFlowR 0.1.0.9057<a class="anchor" aria-label="anchor" href="#birdflowr-0109057"></a></h2>
<p>2024-04-17</p>
<ul><li>
<code><a href="../reference/export_import_birdflow.html">import_birdflow()</a></code> now works with preprocessed hdf5 files. See <a href="https://github.com/birdflow-science/BirdFlowR/issues/177" class="external-link">#177</a></li>
<li>
<code>preprocess_birdflow()</code> and <code><a href="../reference/export_import_birdflow.html">import_birdflow()</a></code> are now more consistent with some dimension names:
<ul><li>
<code>bf$geom$ext</code> is now an unnamed vector in objects from either function. Previously one was a named vector. The <code>ext(bf)</code> return object is unchanged.</li>
<li>
<code>distr</code>, <code>dynamic_mask</code>, <code>uci</code>, and <code>lci</code> now always have <code>NULL</code> rownames and <code>"t&lt;timestep&gt;"</code> column names, and the names of those two dimensions are <code>"i"</code> and <code>"time"</code>.</li>
<li>
<code><a href="../reference/export_import_birdflow.html">import_birdflow()</a></code> no longer drops two metadata items that it was losing before: <code>ebirdst_version</code> and <code>birdflowr_preprocess_version</code> these will exist in old <code>.hdf5</code> files but not in old <code>.rds</code> files.<br></li>
</ul></li>
<li>
<code>compare_lists()</code> (internal helper) return format changed slightly.</li>
<li>
<code><a href="../reference/export_import_birdflow.html">import_birdflow()</a></code> and <code><a href="../reference/export_import_birdflow.html">export_birdflow()</a></code> now work with sparse models. Marginals from these models are converted to standard matrices before writing so some of the benefits of sparsification are lost when writing to hdf5 files - but compression will probably mitigate this somewhat. Sparse Matrices are re-created when sparse models are re-imported.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9056" id="birdflowr-0109056">BirdFlowR 0.1.0.9056<a class="anchor" aria-label="anchor" href="#birdflowr-0109056"></a></h2>
<p>2024-04-04</p>
<div class="section level3">
<h3 id="flux-iii-0-1-0-9056">Flux III<a class="anchor" aria-label="anchor" href="#flux-iii-0-1-0-9056"></a></h3>
<ul><li>
<code><a href="../reference/is_between.html">is_between()</a></code> now uses a <code><a href="https://rdrr.io/pkg/SparseArray/man/SparseArray-class.html" class="external-link">SparseArray::SparseArray()</a></code> for the logical array. to reduce memory usage</li>
<li>Labeling updates to <code><a href="../reference/plot_flux.html">plot_flux()</a></code> and <code><a href="../reference/animate_flux.html">animate_flux()</a></code>.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9055" id="birdflowr-0109055">BirdFlowR 0.1.0.9055<a class="anchor" aria-label="anchor" href="#birdflowr-0109055"></a></h2>
<p>2024-03-29</p>
<div class="section level3">
<h3 id="flux-ii-0-1-0-9055">Flux II<a class="anchor" aria-label="anchor" href="#flux-ii-0-1-0-9055"></a></h3>
<ul><li>Flux values are now divided by the radius to standardize units at at P/km/week/ where P is the proportion of the population.</li>
<li>Add tests for <code><a href="../reference/calc_flux.html">calc_flux()</a></code> and <code><a href="../reference/is_between.html">is_between()</a></code>
</li>
<li>Add analysis of flux radius parameter’s affect on flux values. It’s in <code>"test-calc_flux.R"</code>.</li>
<li>Add limit to radius argument in <code><a href="../reference/calc_flux.html">calc_flux()</a></code> and ability to bypass it with <code>check_radius</code> argument.</li>
<li>Modified <code><a href="../reference/is_between.html">is_between()</a></code> to only calculate the result for transitions that are non-zero (at any timestep) in <code>bf</code>. This provides a slight performance benefit for standard models and a large one for sparse models.</li>
<li>
<code>is_betweeen()</code> now processes connection lines in batches, controlled by <code>batch_size</code> argument to it and <code><a href="../reference/calc_flux.html">calc_flux()</a></code>. This is for memory management.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9054" id="birdflowr-0109054">BirdFlowR 0.1.0.9054<a class="anchor" aria-label="anchor" href="#birdflowr-0109054"></a></h2>
<div class="section level3">
<h3 id="flux-i-0-1-0-9054">Flux I<a class="anchor" aria-label="anchor" href="#flux-i-0-1-0-9054"></a></h3>
<p>Non-directional only, additional changes pending</p>
<div class="section level4">
<h4 id="changes-0-1-0-9054">Changes<a class="anchor" aria-label="anchor" href="#changes-0-1-0-9054"></a></h4>
<ul><li><p>The first argument of <code><a href="../reference/lookup_date.html">lookup_date()</a></code> is now <code>x</code> instead of <code>timestep</code> <code>timestep</code> is added as a deprecated third argument so all old usage should work.<br></p></li>
<li><p><code>lookup_dates()</code> now works with transition names (e.g. “T_01-02”) marginal names (“M_02-03”), character timesteps (“T1”, “T2”), and, as before, numeric timesteps. Marginal and transition dates are the midpoint between the two timesteps, this falls squarely between two dates and it is left up to <code><a href="https://rdrr.io/r/base/Dates.html" class="external-link">base::mean.Date()</a></code> to resolve this, which it does by rounding down.</p></li>
<li><p>Add internal function <code><a href="../reference/is_between.html">is_between()</a></code> to determines if a set points are on the great circles connecting every possible pair of active cells in a BirdFlow model. It will be used to calculate flux. Currently it is non-directional.</p></li>
<li><p>Add <code><a href="../reference/get_marginal.html">get_marginal()</a></code><br></p></li>
<li><p>Add <code><a href="../reference/calc_flux.html">calc_flux()</a></code>, <code><a href="../reference/plot_flux.html">plot_flux()</a></code>, <code><a href="../reference/animate_flux.html">animate_flux()</a></code> currently they only calculate and work with non-directional flux / net movement.</p></li>
</ul></div>
<div class="section level4">
<h4 id="pending-flux-changes-0-1-0-9054">Pending flux changes<a class="anchor" aria-label="anchor" href="#pending-flux-changes-0-1-0-9054"></a></h4>
<ul><li><p>Test <code><a href="../reference/is_between.html">is_between()</a></code></p></li>
<li><p>Test <code><a href="../reference/calc_flux.html">calc_flux()</a></code></p></li>
<li><p>Test <code><a href="../reference/get_marginal.html">get_marginal()</a></code></p></li>
<li><p>Test <code><a href="../reference/plot_flux.html">plot_flux()</a></code> and <code><a href="../reference/animate_flux.html">animate_flux()</a></code></p></li>
<li><p>Normalize? See Dan’s comment in the issue.</p></li>
<li><p>Directional <code><a href="../reference/is_between.html">is_between()</a></code></p></li>
<li><p>Directional <code><a href="../reference/calc_flux.html">calc_flux()</a></code></p></li>
</ul></div>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9053" id="birdflowr-0109053">BirdFlowR 0.1.0.9053<a class="anchor" aria-label="anchor" href="#birdflowr-0109053"></a></h2>
<p>2024-03-15</p>
<ul><li>New <code>shrink_birdlfow()</code> reverses <code><a href="../reference/extend_birdflow.html">extend_birdflow()</a></code>, returning the model to it’s original extent.</li>
<li>
<code><a href="../reference/extend_birdflow.html">extend_birdflow()</a></code>now can “extend” BirdFlow models to smaller extents if they have already been extended and the new extent is still larger than the original.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9052" id="birdflowr-0109052">BirdFlowR 0.1.0.9052<a class="anchor" aria-label="anchor" href="#birdflowr-0109052"></a></h2>
<p>2024-03-14</p>
<ul><li>
<code><a href="../reference/export_import_birdflow.html">export_birdflow()</a></code> gets new arguments to control output file names. Default values mimic old behavior.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9051" id="birdflowr-0109051">BirdFlowR 0.1.0.9051<a class="anchor" aria-label="anchor" href="#birdflowr-0109051"></a></h2>
<p>2024-02-28</p>
<ul><li>Add <code><a href="../reference/get_mask.html">get_mask()</a></code>
</li>
<li>Add <code>extend_bird_flow()</code>
</li>
<li>Add internal <code><a href="../reference/read_geom.html">read_geom()</a></code>
</li>
<li>Add internal <code><a href="../reference/extend_geom.html">extend_geom()</a></code>
</li>
<li>Make <code><a href="../reference/export_import_birdflow.html">export_birdflow()</a></code> a public function.</li>
<li>Update <code><a href="../reference/export_import_birdflow.html">import_birdflow()</a></code> so that it can re-import a BirdFlow model. Previously the only viable workflow was <code>preprocess_birdflow()</code>, fit model in BirdFlowPy, and then<code><a href="../reference/export_import_birdflow.html">import_birdflow()</a></code> (once). After that we wrote the model to .rda files. Now it’s possible to do the above but then save it to a new <code>hdf5</code> with: <code><a href="../reference/export_import_birdflow.html">export_birdflow()</a></code> (to hdf5) and then import again with <code><a href="../reference/export_import_birdflow.html">import_birdflow()</a></code>. Note, however, that the file structure of a re-exported hdf5 will not match that of the output from python, b/c on the first import R updates a bunch of data structures - for instance renaming the marginals and adding a marginal index, and the re-exported model retains those updates. Thus, the need to modify <code><a href="../reference/export_import_birdflow.html">import_birdflow()</a></code> to behave appropriately with both file structures.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9050" id="birdflowr-0109050">BirdFlowR 0.1.0.9050<a class="anchor" aria-label="anchor" href="#birdflowr-0109050"></a></h2>
<p>2024-02-22</p>
<ul><li>Add test for <code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> with a non-default CRS.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9049" id="birdflowr-0109049">BirdFlowR 0.1.0.9049<a class="anchor" aria-label="anchor" href="#birdflowr-0109049"></a></h2>
<p>2024-01-11</p>
<div class="section level5">
<h5 id="drop-_clip-0-1-0-9049">Drop “_clip”<a class="anchor" aria-label="anchor" href="#drop-_clip-0-1-0-9049"></a></h5>
<p>Drop “_clip” from name when clipping with preprocess_species() See issue <a href="https://github.com/birdflow-science/BirdFlowR/issues/165" class="external-link">#165</a>, but note I haven’t added the extra metadata item yet.</p>
</div>
<div class="section level5">
<h5 id="zero-abundance-for-some-timesteps-0-1-0-9049">Zero abundance for some timesteps<a class="anchor" aria-label="anchor" href="#zero-abundance-for-some-timesteps-0-1-0-9049"></a></h5>
<p><code>validate_birdflow()</code> and thus also <code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> now throw errors if any distribution doesn’t sum to 1 or if the dynamic mask excludes all cells for a timestep. This addresses a problem discovered when attempting to fit models with species: “antnig” (Antillean Nighthawk) where for some timesteps the abundance grids from status and trends are all zero. Prior to this change it was possible to preprocess Antillean Nighthawk but then during fitting with BirdFlowPy confusing errors were thrown.</p>
<p>The change can be observed with: <code>{r} preprocess_species("antnig", res = 150, hdf5 = FALSE,                      skip_quality_checks = TRUE)`</code></p>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9048" id="birdflowr-0109048">BirdFlowR 0.1.0.9048<a class="anchor" aria-label="anchor" href="#birdflowr-0109048"></a></h2>
<p>2023-12-22</p>
<ul><li>Fix <code><a href="../reference/snap_to_birdflow.html">snap_to_birdflow()</a></code>
<ul><li>Now works with date column names other than “date”</li>
<li>Consistently re-formats dates with <code><a href="https://lubridate.tidyverse.org/reference/as_date.html" class="external-link">lubridate::as_date()</a></code> and standardizes return date column to “date”</li>
<li>now handles empty data frame input gracefully by returning empty data frame with appropriate column names and classes.</li>
</ul></li>
<li>Fix <code><a href="../reference/export_rasters.html">export_rasters()</a></code> bugs when exporting TIFF files (with some combinations of arguments)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9047" id="birdflowr-0109047">BirdFlowR 0.1.0.9047<a class="anchor" aria-label="anchor" href="#birdflowr-0109047"></a></h2>
<p>2023-12-22</p>
<ul><li>Fix <code><a href="../reference/snap_to_birdflow.html">snap_to_birdflow()</a></code> now works with preprocessed (but not fit) models.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9046" id="birdflowr-0109046">BirdFlowR 0.1.0.9046<a class="anchor" aria-label="anchor" href="#birdflowr-0109046"></a></h2>
<p>2023-12-21</p>
<p>New functions:</p>
<ul><li><p><code><a href="../reference/snap_to_birdflow.html">snap_to_birdflow()</a></code> snap movement data to a BirdFlow model week and cells and optionally aggregate the data from each week (by unique bird or track).</p></li>
<li><p><code><a href="../reference/lookup_date.html">lookup_date()</a></code> convert timesteps to dates.</p></li>
</ul><p>Changes</p>
<ul><li>
<code><a href="../reference/lookup_timestep.html">lookup_timestep()</a></code> gains a new argument <code>allow_failure</code>. FALSE, the default mimics prior behavior. Set to TRUE to return NA if the date cannot be looked up.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9045" id="birdflowr-0109045">BirdFlowR 0.1.0.9045<a class="anchor" aria-label="anchor" href="#birdflowr-0109045"></a></h2>
<p>2023-12-18</p>
<p>New function <code><a href="../reference/combine_transitions.html">combine_transitions()</a></code> combines the transition matrices from a series of timesteps into a single transition matrix that encodes the transition probabilities between the starting and ending timesteps in a single multi-week transition matrix.</p>
<p>New <strong>BirdFlowExtras</strong> package uses <code><a href="../reference/combine_transitions.html">combine_transitions()</a></code> to calculate migratory connectivity. That package will hold more esoteric uses of BirdFlow models, and any functions that rely on packages that are not on either CRAN or Bioconductor.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9044" id="birdflowr-0109044">BirdFlowR 0.1.0.9044<a class="anchor" aria-label="anchor" href="#birdflowr-0109044"></a></h2>
<p>2023-12-16</p>
<p>More test tweaking - all changes should be invisible to users.</p>
<ul><li>Sped up tests, mostly by using truncated models for slow tests.</li>
<li>Added helper functions to <code>tests/testthat/</code>:
<ul><li>
<code>local_quiet()</code> - Sets verbose to FALSE within a test scope</li>
<li>
<code>local_test_dir()</code> - Creates a temporary directory that will be deleted automatically on test completion.</li>
</ul></li>
<li>Eliminated almost all messages output during testing to improve test result legibility.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9043" id="birdflowr-0109043">BirdFlowR 0.1.0.9043<a class="anchor" aria-label="anchor" href="#birdflowr-0109043"></a></h2>
<p>2023-12-15</p>
<p>More tests and cleaner message handling. Users should be unaffected, but might see fewer messages if <code>birdflow_options("verbose")</code> is <code>TRUE</code>.</p>
<ul><li>New test for <code>build_collection_index()</code>
</li>
<li>New internal <code><a href="../reference/bf_msg.html">bf_msg()</a></code> now used for messages from BirdFlowR functions.</li>
<li>New internal <code><a href="../reference/bf_suppress_msg.html">bf_suppress_msg()</a></code> to wrap calls to other packages so that their messages are suppressed when verbose is false.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9042" id="birdflowr-0109042">BirdFlowR 0.1.0.9042<a class="anchor" aria-label="anchor" href="#birdflowr-0109042"></a></h2>
<p>2023-12-14</p>
<ul><li>Updated sparsification to work with dynamically masked models</li>
<li>Added new parameter <code>p_protected</code> to <code><a href="../reference/sparsify.html">sparsify()</a></code>.<br>
It is used with conditional sparsification to specify a proportion of the transitions out of every location that won’t be zeroed out.</li>
<li>Added tests for <code><a href="../reference/sparsify.html">sparsify()</a></code> and related functions.</li>
<li>Added <code>n_states</code> statistic to <code><a href="../reference/distribution_performance.html">distribution_performance()</a></code> and thus also to <code>$metadata$sparse$stats</code> it reports the total number of non-zero values in the marginal derived distributions for all time steps in the model. This is the number of states (locations in time and space) that birds can occupy in the model.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9041" id="birdflowr-0109041">BirdFlowR 0.1.0.9041<a class="anchor" aria-label="anchor" href="#birdflowr-0109041"></a></h2>
<p>2023-12-12</p>
<ul><li>Dropped the ability to import pre-dynamic-mask models. This was announced in 0.1.0.9040 but not done.</li>
<li>Fix spelling and minor documentation edits</li>
<li>Fix bug in <code><a href="../reference/dimensions.html">n_parameters()</a></code> for fitted models.</li>
<li>
<code><a href="../reference/birdflow_options.html">birdflow_options()</a></code> now accepts a list with option names and their new values, as well as all the previously accepted argument forms.</li>
<li>Improve <code>validate_BirdFlowR()</code> error reporting.<br></li>
<li>Add tests for:
<ul><li>Date lookup on preprocessed but not fitted models. Closes <a href="https://github.com/birdflow-science/BirdFlowR/issues/147" class="external-link">#147</a>.</li>
<li><code>n_paramaters()</code></li>
<li><code><a href="../reference/load_model.html">load_model()</a></code></li>
<li><code><a href="../reference/load_collection_index.html">load_collection_index()</a></code></li>
<li><code><a href="../reference/route_migration.html">route_migration()</a></code></li>
<li>
<code><a href="../reference/marginal_stats.html">marginal_stats()</a></code>, <code><a href="../reference/marginal_stats.html">calc_pct_zero()</a></code>, and <code><a href="../reference/marginal_stats.html">sum_marginals()</a></code>
</li>
<li><code><a href="../reference/find_threshold.html">find_threshold()</a></code></li>
<li>
<code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> for <code>BirdFlow</code> and <code>BirdFlowRoutes</code> objects.</li>
<li><code><a href="../reference/cache_path.html">cache_path()</a></code></li>
<li><code>compare_geom()</code></li>
<li><code><a href="../reference/birdflow_options.html">birdflow_options()</a></code></li>
<li>
<code><a href="../reference/build_transitions.html">build_transitions()</a></code>, <code><a href="../reference/build_transitions.html">drop_transitions()</a></code>
</li>
</ul></li>
<li>Expand testing for:
<ul><li><code><a href="../reference/preprocess_species.html">preprocess_species()</a></code></li>
<li><code><a href="../reference/validate_BirdFlow.html">validate_BirdFlow()</a></code></li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9040" id="birdflowr-0109040">BirdFlowR 0.1.0.9040<a class="anchor" aria-label="anchor" href="#birdflowr-0109040"></a></h2>
<p>2023-12-11</p>
<div class="section level3">
<h3 id="support-for-ebirdst-added-0-1-0-9040">Support for <strong>ebirdst</strong> 3.2022.0 added.<a class="anchor" aria-label="anchor" href="#support-for-ebirdst-added-0-1-0-9040"></a></h3>
<p><strong>BirdFlowR</strong> can now fit models based on eBird 2022 data or 2021 data and will preprocess using whichever version of <strong>ebirdst</strong> is loaded. Both types of fitted models can be used with BirdFlowR. Most testing will run with either version of <strong>ebirdst</strong> installed but CRAN checks will only pass with the new version due to references to objects that don’t exist in the old version.</p>
</div>
<div class="section level3">
<h3 id="breaking-0-1-0-9040">Breaking<a class="anchor" aria-label="anchor" href="#breaking-0-1-0-9040"></a></h3>
<ul><li>
<p><code><a href="../reference/get_dates.html">get_dates()</a></code></p>
<ul><li>Models fit using <strong>ebirdst</strong> 2.2021 have <code>$dates</code> columns: <code>"interval"</code>, <code>"date"</code>, <code>"midpoint"</code>, <code>"start"</code>, <code>"end"</code>, <code>"doy"</code>, and <code>"week"</code>.</li>
<li>Models fit with <strong>ebirdst</strong> 3.2022 have <code>$dates</code> columns: <code>"timestep"</code>, <code>"date"</code>, <code>"label"</code>, <code>"julian"</code>, and <code>"week"</code>.</li>
<li>Regardless of the <code>$dates</code> format in the model object <code><a href="../reference/get_dates.html">get_dates()</a></code> returns the newer columns: <code>"timestep"</code>, <code>"date"</code>, <code>"label"</code>, <code>"julian"</code>, and <code>"week"</code>. Previously it returned the older columns.</li>
<li>Users should replace <code>bf$dates</code> with <code><a href="../reference/get_dates.html">get_dates()</a></code> and use new column names.</li>
</ul></li>
<li><p>Inconsistent weeks. <strong>eBird</strong> changed the way dates are assigned to weeks in the 2022 version. See notes in <code><a href="../reference/get_dates.html">get_dates()</a></code> for details. <strong>BirdFlowR</strong> honors the date scheme used in the eBird data each model was built with and thus some dates will be assigned to a different week with a 2021 model than they are with a 2022 model this will affect <code><a href="../reference/lookup_timestep.html">lookup_timestep()</a></code>, <code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code>, and the many functions that rely on them.</p></li>
<li><p>Importing (old) BirdFlow models fit without a dynamic mask is no longer supported. Predicting with them is. Use BirdFlowR 0.1.0.39 if you want to import an old hdf5 file which could then be saved with <code><a href="https://rspatial.github.io/terra/reference/serialize.html" class="external-link">saveRDS()</a></code>. Dynamic masks were added in 0.1.0.9001 (April 2023) so only models fit (but not imported) before then will be affected.</p></li>
</ul></div>
<div class="section level3">
<h3 id="new-0-1-0-9040">New<a class="anchor" aria-label="anchor" href="#new-0-1-0-9040"></a></h3>
<ul><li><p><code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> works with both <strong>ebirdst</strong> 3.2022.0 and 2.2021.3. It will use whichever version is loaded and models fit with either eBird version year can be used with BirdFlow.</p></li>
<li>
<p>New metadata items</p>
<ul><li>
<code>birdflowr_preprocess_version</code>: the version of <strong>BirdFlowR</strong> used for preprocessing.</li>
<li>
<code>ebirdst_version</code>: the <strong>ebirdst</strong> version used while preprocessing.</li>
</ul></li>
</ul></div>
<div class="section level3">
<h3 id="updates-0-1-0-9040">Updates<a class="anchor" aria-label="anchor" href="#updates-0-1-0-9040"></a></h3>
<ul><li>
<p>A number of internal changes were made to <code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> to work with <strong>ebirdst</strong> v. 3.2022</p>
<ul><li>
<code>species</code> can be set to either <code>"example_date"</code> or <code>"yeseb-example"</code> to triggering using <strong>ebirdst</strong> example data. <strong>BirdFlowR</strong> will silently switch between the two to accommodate <strong>ebirdst</strong>.</li>
<li>If <strong>ebirdst</strong> version &gt;= 3.2022 the quality of the species model is checked using the <code>&lt;x&gt;_season_quality</code> values instead of the dropped <code>&lt;x&gt;_range_modeled</code> information and an error is thrown if any value is less than the new <code>min_season_quality</code> argument which defaults to <code>3</code>. With <strong>ebirdst</strong> 2.2021 quality is still checked with <code>&lt;x&gt;_range_modeled</code>.</li>
<li>With <strong>ebirdst</strong> &gt;= 3.2022 all the new trends columns are dropped from <code>ebirdst_runs</code> when creating the species data. The data available via <code><a href="../reference/species_info.html">species_info()</a></code> (and <code>$species</code>) is unchanged.</li>
<li>A new <code>dates</code> format is now used with 2022 models.</li>
</ul></li>
<li>
<p>Date lookup code was overhauled throughout the package.</p>
<ul><li>Most use of <code>$dates</code> was dropped in favor of <code><a href="../reference/get_dates.html">get_dates()</a></code> to handle the two date formats in use.</li>
</ul></li>
<li><p><code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> snapshot tests were updated to use eBird 2022 derived snapshots and are skipped if older versions of <strong>ebirdst</strong> are loaded, but most <code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> tests are still run.</p></li>
<li><p>Several internal functions documented in <code>ebirdst-compatibility</code> help insulate <strong>BirdFlowR</strong> from the changes in the <strong>ebirdst</strong> API and facilitate working with both versions.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9039" id="birdflowr-0109039">BirdFlowR 0.1.0.9039<a class="anchor" aria-label="anchor" href="#birdflowr-0109039"></a></h2>
<p>2023-11-21</p>
<p>Updated tests to work with new example data and ebirdst 3.2022.0</p>
<ul><li>Updated tests for new <code>amewoo</code> model in <strong>BirdFlowModels</strong> (R package) v. 0.0.2.9002</li>
<li>Added formal dependency on BirdFlowModels &gt;= 0.0.2.9002.</li>
<li>Updates to pass CRAN checks but not preprocess with <strong>ebirdst</strong> 3.2022.0 * Added <code>ebird/ebirdst</code> to remotes (to force installing development version). Revert this after changes in <strong>ebirdst</strong><br>
47bbdfc87 are on CRAN * Add skip_if_unsupported_ebirdst_version() to preprocess species tests as it currently does for <strong>ebirdst</strong> 3.2022.0. * Add copy of <code>ebirdst_weeks</code> to BirdFlowR as internal data.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9038" id="birdflowr-0109038">BirdFlowR 0.1.0.9038<a class="anchor" aria-label="anchor" href="#birdflowr-0109038"></a></h2>
<p>2023-11-16</p>
<p>Trying to pass all CI checks while still using ebirdst 2.2021</p>
<ul><li>Added version dependency &lt;= 2.2021.3 for <strong>ebirdst</strong> (under imports) to avoid version 3.2022 until <strong>BirdFlowR</strong> is updated for the significant changes in <strong>ebirdst</strong>
</li>
<li>Removed call to <code><a href="https://ebird.github.io/ebirdst/reference/ebirdst-deprecated.html" class="external-link">ebirdst::abundance_palette()</a></code> and replaced it with the resulting values. As it was <strong>ebirdst</strong> should have been in imports. This also dodges dealing with the function name change in v. 3.2022.0.</li>
<li>Dropped code that dealt with older version of <code>$dates</code>.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9037" id="birdflowr-0109037">BirdFlowR 0.1.0.9037<a class="anchor" aria-label="anchor" href="#birdflowr-0109037"></a></h2>
<p>2023-11-14</p>
<ul><li>Spelling
<ul><li>Checked spelling on package documentation and vignettes.</li>
<li>Added <code>inst\WORDLIST</code> (extending dictionary of valid words).</li>
<li>To check package spelling use <code>devtools::spell_check()</code>
</li>
<li>Added section on spelling to <code>./.github/CONTRIBUTING.html</code>
</li>
</ul></li>
<li>
<code>export_tif()</code> renamed to <code><a href="../reference/export_rasters.html">export_rasters()</a></code> and extended to export PNG as well as GeoTIFF files and optionally to convert small floating point numbers into larger integers for export to integer datatypes. Unit tests added.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9036" id="birdflowr-0109036">BirdFlowR 0.1.0.9036<a class="anchor" aria-label="anchor" href="#birdflowr-0109036"></a></h2>
<p>2023-11-14</p>
<ul><li>Documentation editing.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9035" id="birdflowr-0109035">BirdFlowR 0.1.0.9035<a class="anchor" aria-label="anchor" href="#birdflowr-0109035"></a></h2>
<p>2023-11-01</p>
<p>Existing code should not be affected in any way by this update.</p>
<ul><li><p>New function<code>export_tif()</code> facilitates exporting TIFF files of a BirdFlow model’s distributions and dynamic masks. Could be used to replace functionality that used to be in <code><a href="../reference/preprocess_species.html">preprocess_species()</a></code>, my motivation for adding it is for use with Avian Flu modeling.</p></li>
<li><p>New function <code><a href="../reference/pad_timestep.html">pad_timestep()</a></code> converts a numeric timestep into a character padded with leading zeros if appropriate. Given <code>1</code> it returns <code>"01"</code>. It is now used internally anywhere timestep or marginal names are padded. It’s also used by <code>export_tif()</code> for file naming if exporting single band TIFF files.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9034" id="birdflowr-0109034">BirdFlowR 0.1.0.9034<a class="anchor" aria-label="anchor" href="#birdflowr-0109034"></a></h2>
<p>2023-10-17</p>
<ul><li><p><code>preprocess_species</code> now adds a <code>week</code> column to <code>$dates</code> component of BirdFlow objects. Initially this is identical to the <code>interval</code> column. However, after truncation intervals will be renumbered to <code>1:n_active()</code> but weeks will always reference the week of the year. Closes <a href="https://github.com/birdflow-science/BirdFlowR/issues/132" class="external-link">#132</a>.</p></li>
<li><p>linted package - fixed most issues flagged by <code>lintr::lint_package()</code></p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9033" id="birdflowr-0109033">BirdFlowR 0.1.0.9033<a class="anchor" aria-label="anchor" href="#birdflowr-0109033"></a></h2>
<p>2023-10-10</p>
<ul><li>Minor update to <code>build_collection_index()</code> so it works regardless of whether BirdFlowR is loaded with <code>devtools::load_all()</code> or <code><a href="https://birdflow-science.github.io/BirdFlowR/">library(BirdFlowR)</a></code>.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9032" id="birdflowr-0109032">BirdFlowR 0.1.0.9032<a class="anchor" aria-label="anchor" href="#birdflowr-0109032"></a></h2>
<p>2023-09-20</p>
<ul><li>BREAKING change to column names in data frame returned by <code>rasterize_distr(format = "dataframe")</code>
<ul><li>Old <code>"time"</code> is now <code>"label"</code> and is an ordered factor it is derived from the column names in the distribution which are often but not always dates.</li>
<li>Old <code>"density"</code> is now <code>"value"</code>.</li>
</ul></li>
<li>New functions to visualize distributions:
<ul><li><code><a href="../reference/plot_distr.html">plot_distr()</a></code></li>
<li><code><a href="../reference/animate_distr.html">animate_distr()</a></code></li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9031" id="birdflowr-0109031">BirdFlowR 0.1.0.9031<a class="anchor" aria-label="anchor" href="#birdflowr-0109031"></a></h2>
<p>2023-09-08</p>
<ul><li><p>New function <code><a href="../reference/as_distr.html">as_distr()</a></code> converts raster (<code><a href="https://rspatial.github.io/terra/reference/SpatRaster-class.html" class="external-link">terra::SpatRaster</a></code>) and point (<code><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">sf::sf</a></code>or data frames) data into distributions. Rasters will be projected into cells that align with the BirdFlow object’s cells and then cropped and masked. With default settings the resulting values will be normalized to sum to 1 and any NA values will be replaced with 0. Points are converted into a distribution for each point in which all the density is placed in the cell corresponding to the point. Projection of <code>sf</code> and <code>SpatRasters</code> is done automatically. Data in dataframes is assumed to match the coordinate reference system (CRS) of the BirdFlow object unless the <code>crs</code> argument is used to define the CRS. Addresses <a href="https://github.com/birdflow-science/BirdFlowR/issues/116" class="external-link">#116</a>.</p></li>
<li><p>bug fix in <code><a href="../reference/index_conversions.html">xy_to_latlon()</a></code> that caused it to fail when <code>y</code> was omitted.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9030" id="birdflowr-0109030">BirdFlowR 0.1.0.9030<a class="anchor" aria-label="anchor" href="#birdflowr-0109030"></a></h2>
<p>2023-07-27</p>
<div class="section level3">
<h3 id="preprocess_species-0-1-0-9030">preprocess_species()<a class="anchor" aria-label="anchor" href="#preprocess_species-0-1-0-9030"></a></h3>
<p>This update is a major overhaul of <code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> with two primary goals.</p>
<ul><li>Adding support for preprocessing truncated models - models that cover only part of the year.<br></li>
<li>Cleaning up and simplifying the code by dropping some outdated parameters and breaking the function up into several functions.</li>
</ul><div class="section level4">
<h4 id="dropped-arguments-breaking-change-0-1-0-9030">Dropped arguments <strong>Breaking change</strong>
<a class="anchor" aria-label="anchor" href="#dropped-arguments-breaking-change-0-1-0-9030"></a></h4>
<ul><li>
<code>tiff</code> - Prior default of FALSE is now always used and TIFF export of abundance data is no longer an option.</li>
<li>
<code>treat_na_as_zero</code> prior default of TRUE is now always used.</li>
<li>
<code>dummy_dynamic_mask</code> prior default of FALSE is now always used.</li>
</ul><p>All three of these were a little anachronistic. <code>TIFF</code> output original was used in place of including the abundance data in the <code>hdf5</code>. The other two arguments were added during updates to allow simulating the older behavior for testing the update, and in both cases we’ve decided we like the newer behavior.</p>
<p>Although these are breaking changes in that previously supported arguments are dropped, the new behavior mimics the old default behavior and I expect in most cases the values were not set differently than the default.</p>
<p><strong>Note:</strong> Although TIFF output of abundances is no longer directly supported by preprocess species any model’s abundance can be exported as TIFF with:</p>
<pre><code><span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">bf</span><span class="op">)</span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/writeRaster.html" class="external-link">writeRaster</a></span><span class="op">(</span><span class="va">r</span>, <span class="st">"abundance.tif"</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="refactoring-0-1-0-9030">Refactoring<a class="anchor" aria-label="anchor" href="#refactoring-0-1-0-9030"></a></h4>
<p>This shouldn’t have any effect on users.</p>
<p><code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> was broken into four functions. The three new functions are all internal helper functions. They are:</p>
<ul><li>
<code><a href="../reference/determine_resolution.html">determine_resolution()</a></code> does the surprisingly tricky work of figuring out what resolution yields the desired number of fitted parameters in the model.</li>
<li>
<code><a href="../reference/process_rasters.html">process_rasters()</a></code> generates the resampled and aggregated rasters used by the model from the eBird S&amp;T rasters.</li>
<li>
<code><a href="../reference/export_import_birdflow.html">export_birdflow()</a></code> exports a BirdFlow model as an hdf5 (or optionally .Rds)</li>
</ul></div>
<div class="section level4">
<h4 id="truncation-new-0-1-0-9030">Truncation <strong>New</strong>
<a class="anchor" aria-label="anchor" href="#truncation-new-0-1-0-9030"></a></h4>
<p><code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> gains a <code>...</code> argument that is used to determine model truncation, and combination of parameters supported by <code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code> works here (e.g. <code>season = prebreeding</code> and <code>start = 5, end = 10</code>). The result is a non-cyclical preprocessed mode that only covers the transitions for the given time period. Truncation does not affect the resolution determination - resolution is selected such that the full model meets the desired number of parameters or GPU RAM. This means resolution isn’t dependent on the truncation - facilitating possible later stitching back together several truncated models from the same species.</p>
</div>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9029" id="birdflowr-0109029">BirdFlowR 0.1.0.9029<a class="anchor" aria-label="anchor" href="#birdflowr-0109029"></a></h2>
<p>2023-07-25</p>
<p>Minor edits to vignettes and collection index.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9028" id="birdflowr-0109028">BirdFlowR 0.1.0.9028<a class="anchor" aria-label="anchor" href="#birdflowr-0109028"></a></h2>
<p>2023-07-18</p>
<ul><li>Added BirdFlowOverview vignette from <a href="https://github.com/dsheldon" class="external-link">@dsheldon</a>.</li>
<li>Minor updates to BirdFlowR vignette.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9027" id="birdflowr-0109027">BirdFlowR 0.1.0.9027<a class="anchor" aria-label="anchor" href="#birdflowr-0109027"></a></h2>
<p>2023-07-17</p>
<ul><li>Added size column to collection index.</li>
<li>Made model download explicitly binary (for windows).</li>
<li>
<code><a href="../reference/load_model.html">load_model()</a></code> and related functions now work with or without trailing slash in collection URL.</li>
<li>
<code>build_collection_url()</code> re-uses metadata if the .Rds file hasn’t changed and thus retains the same release date.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9026" id="birdflowr-0109026">BirdFlowR 0.1.0.9026<a class="anchor" aria-label="anchor" href="#birdflowr-0109026"></a></h2>
<p>2023-07-14</p>
<p>Fixed bug in ‘make_cache_readme()’</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9025" id="birdflowr-0109025">BirdFlowR 0.1.0.9025<a class="anchor" aria-label="anchor" href="#birdflowr-0109025"></a></h2>
<p>2023-07-11</p>
<p>Added support for model collections</p>
<p>New Functions:</p>
<ul><li>
<code><a href="../reference/load_model.html">load_model()</a></code> User facing function to load a model from the cache - downloading it first if necessary.</li>
<li>
<code>build_collection_index()</code> Run on a directory with model files to add index files and convert the directory into a collection.</li>
<li>
<code><a href="../reference/cache_path.html">cache_path()</a></code> helper function. Returns the path to the (local) cache directory where model files are saved. It is specific to the collection url.</li>
<li>
<code><a href="../reference/make_cache_readme.html">make_cache_readme()</a></code> helper function to make readme files in both the collection specific cache directory and it’s parent BirdFlowR cache directory. It writes the date of the last cache update as well so is run anytime new files are saved to the cache.</li>
</ul><p>Updated:</p>
<ul><li>
<code><a href="../reference/birdflow_options.html">birdflow_options()</a></code> has two new values:
<ul><li>
<code>collection_url</code>: the base url for the collection.</li>
<li>
<code>cache</code>: the URL for the BirdFlowR cache directory which holds the collection specific cache directories.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9024" id="birdflowr-0109024">BirdFlowR 0.1.0.9024<a class="anchor" aria-label="anchor" href="#birdflowr-0109024"></a></h2>
<p>2023-07-03</p>
<p>Most of this update was focused on allowing partial year models (<a href="https://github.com/birdflow-science/BirdFlowR/issues/39" class="external-link">#39</a>). The bulk of the work required for that goal is done, however, it is not integrated with <code><a href="../reference/preprocess_species.html">preprocess_species()</a></code>, so in practice it’s not very useful yet.</p>
<p>I’ve also split some internal code into additional helper functions which makes the package code a little cleaner but doesn’t affect users.</p>
<p>The one change that might affect users is the ability to subset a fitted model to a date range with <code><a href="../reference/truncate_birdflow.html">truncate_birdflow()</a></code>.</p>
<ul><li>New function <code><a href="../reference/truncate_birdflow.html">truncate_birdflow()</a></code> truncates the dates a BirdFlow model covers. It works with both fitted and preprocessed models, but is not yet integrated with preprocessing, so logistically currently is only useful for fitted models.</li>
<li>New function <code><a href="../reference/as_transitions.html">as_transitions()</a></code> converts an ordered sequence of timesteps into the names of the transitions that connect them. Used in <code><a href="../reference/predict.BirdFlow.html">predict()</a></code>, <code><a href="../reference/route.html">route()</a></code>, <code><a href="../reference/lookup_transitions.html">lookup_transitions()</a></code>, and <code><a href="../reference/truncate_birdflow.html">truncate_birdflow()</a></code>
</li>
<li>New public,<code><a href="../reference/get_dates.html">get_dates()</a></code> returns the <code>$dates</code> component of a BirdFlow object, replacing an old private function that was no longer used. Fixes <a href="https://github.com/birdflow-science/BirdFlowR/issues/121" class="external-link">#121</a>.</li>
<li>New metadata item <code>timestep_padding</code> tracks how much timesteps are padded in transition and marginal names. <code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> and <code><a href="../reference/new_BirdFlow.html">new_BirdFlow()</a></code> are updated to produce it.<br></li>
<li>New internal function <code><a href="../reference/get_timestep_padding.html">get_timestep_padding()</a></code> retrieves the above or, for older models figures it out from the model structure.</li>
<li>New internal function <code><a href="../reference/make_marginal_index.html">make_marginal_index()</a></code> derived from code previously in <code><a href="../reference/export_import_birdflow.html">import_birdflow()</a></code> is used by both <code><a href="../reference/export_import_birdflow.html">import_birdflow()</a></code> and <code><a href="../reference/truncate_birdflow.html">truncate_birdflow()</a></code>
</li>
<li>New internal function <code><a href="../reference/ts_info.html">ts_info()</a></code> determines if a timestep sequence is forward or backwards and whether it crosses the year boundary.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9023" id="birdflowr-0109023">BirdFlowR 0.1.0.9023<a class="anchor" aria-label="anchor" href="#birdflowr-0109023"></a></h2>
<p>2023-06-20</p>
<div class="section level4">
<h4 id="overview-0-1-0-9023">Overview<a class="anchor" aria-label="anchor" href="#overview-0-1-0-9023"></a></h4>
<p>This update shouldn’t break anything but it will change default behaviors of a few functions: 1. <code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> Models preprocessed after this update will be different then older models.</p>
<ol start="2" style="list-style-type: decimal"><li><p><code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code> now allows looking up a cyclical sequence that represents a full year of transitions and <code>season = all</code> returns the one more timestep then it used to <code>c(1:52, 1)</code>).</p></li>
<li><p>The code in <code><a href="../reference/distribution_performance.html">distribution_performance()</a></code> is unchanged but its default behavior is affected by the change in <code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code>. It now includes the transition from the last to first timesteps in the calculations with the default time arguments.</p></li>
</ol></div>
<div class="section level4">
<h4 id="details-0-1-0-9023">Details<a class="anchor" aria-label="anchor" href="#details-0-1-0-9023"></a></h4>
<ul><li><p>Fixed bug in <code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> that caused it to sometimes create BirdFlow models where the pixels didn’t align with the origin. There’s nothing wrong with the previous behavior from a modeling standpoint but always aligning to the origin has some logistical benefits and was the original intent.</p></li>
<li><p>Fixed bug in <code>reformat_distribution_labels()</code> with 3 dimensional input it would erroneously change the second dimension name to <code>"time"</code>. This caused <code><a href="../reference/predict.BirdFlow.html">predict()</a></code> to produce confusing dimension labels when called on multiple distributions at once.</p></li>
<li><p><code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code> now allows full cycle sequence and returns full cycle sequences with <code>season = "all"</code>. This means including all timesteps and then repeating the first timestep. This also allows setting <code>start</code> and <code>end</code> to the same timestep as well (to loop through a whole year). This will change results from <code>distr_performance()</code> for whole year models.</p></li>
<li><p><code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> gains a new argument and default behavior. It now replaces NA values in the distributions with zero prior to transforming and changing the resolution, and uses bilinear interpolation in place of nearest neighbor. Set <code>treat_na_as_zero</code> to <code>FALSE</code> for old behavior. The new way seems better though. See detailed explanation in <a href="https://github.com/birdflow-science/BirdFlowR/issues/12" class="external-link">Issue </a><a href="https://github.com/birdflow-science/BirdFlowR/issues/12" class="external-link">#12</a>.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9022" id="birdflowr-0109022">BirdFlowR 0.1.0.9022<a class="anchor" aria-label="anchor" href="#birdflowr-0109022"></a></h2>
<p>2023-06-15</p>
<div class="section level4">
<h4 id="overview-0-1-0-9022">Overview<a class="anchor" aria-label="anchor" href="#overview-0-1-0-9022"></a></h4>
<p>This update merges <code><a href="../reference/route_migration.html">route_migration()</a></code> into <code><a href="../reference/route.html">route()</a></code> which can now do everything either of these functions previously did and at least one thing they couldn’t (<a href="https://github.com/birdflow-science/BirdFlowR/issues/88" class="external-link">#88</a>).</p>
<p>The returned object from <code><a href="../reference/route.html">route()</a></code> is also changed: <code>$lines</code> are dropped and <code>$points</code> are now returned in a new S3 class <code>BirdFlowRoutes</code>. With <code><a href="../reference/plot_routes.html">plot_routes()</a></code> I don’t think returning the lines is as useful as it was. The lines can be recreated with <code>sf:st_as_sf(rts)</code>.</p>
<p>This closes <a href="https://github.com/birdflow-science/BirdFlowR/issues/103" class="external-link">#103</a> and <a href="https://github.com/birdflow-science/BirdFlowR/issues/88" class="external-link">#88</a></p>
<p>Details follow.</p>
</div>
<div class="section level4">
<h4 id="breaking-changes-to-route-0-1-0-9022">BREAKING CHANGES to <code>route()</code>
<a class="anchor" aria-label="anchor" href="#breaking-changes-to-route-0-1-0-9022"></a></h4>
<ul><li>Dropped <code>row</code> and <code>col</code> arguments. <code>x_coord</code> and <code>y_coord</code> are sufficient and I think preferred by users.</li>
<li>Renamed <code>n_each</code> argument to <code>n</code>.</li>
<li>Renamed <code>x</code> argument to <code>bf</code>.</li>
<li>Changed order of arguments.</li>
<li>Added <code>from_marginals = TRUE</code> argument that controls which distributions are used when sampling starting locations; I expect most users not to use this argument.</li>
<li>Specifying starting locations (via <code>x_coord</code> and <code>y_coord</code>) is now optional. If those arguments are NULL (the default) then <code>n</code> starting positions will be sampled from the species distribution for the starting timestep. This sampling was previously done only in <code><a href="../reference/route_migration.html">route_migration()</a></code>.</li>
<li>Changes to the returned object for both <code><a href="../reference/route.html">route()</a></code> and <code><a href="../reference/route_migration.html">route_migration()</a></code>
<ul><li>
<code><a href="../reference/route.html">route()</a></code> now returns a<code>BirdFlowRoutes</code> object, which is an extension of a data frame and almost always behaves like a data frame.</li>
<li>The <code>$lines</code> component of the previously returned list has been dropped, and a modified version of what was <code>$points</code> is returned. Use the new <code><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf()</a></code> method for the<code>BirdFlowRoutes</code> object to produce the <strong>sf</strong> lines.</li>
<li>The old <code>points$route</code> column has been renamed<code>route_id</code>
</li>
<li>
<strong>Experimental</strong> the returned <code>BirdFlowRoutes</code> object has attributes that contain much of the ancillary data in the parent BirdFlow object: <code>geom</code>, <code>species</code>, <code>metadata</code>, and <code>dates</code>. Additionally, a new item is added to <code>metadata</code>: <code>route_type = "synthetic"</code>. This may be useful if we also create <code>BirdFlowRoute</code> objects from tracking data. If you want to insulate yourself from the experimental aspects of this call <code><a href="https://rspatial.github.io/terra/reference/as.data.frame.html" class="external-link">as.data.frame()</a></code> on the returned routes.</li>
</ul></li>
</ul></div>
<div class="section level4">
<h4 id="non-breaking-changes-0-1-0-9022">Non-breaking changes<a class="anchor" aria-label="anchor" href="#non-breaking-changes-0-1-0-9022"></a></h4>
<ul><li>Edits to vignettes and readme.</li>
<li>
<code><a href="../reference/route_migration.html">route_migration()</a></code> is deprecated. Its arguments are unchanged and it will work but now throws a warning. Please transition to using <code><a href="../reference/route.html">route()</a></code> with the <code>season</code> argument. The returned object is changed - see changes to <code><a href="../reference/route.html">route()</a></code> above.</li>
<li>A new method for <code><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf()</a></code> convert <code>BirdFlowRoutes</code> objects to <strong>sf</strong> objects with either points or lines. Use <code>st_as_sf(rts)</code> for lines or <code>st_as_sf(rts, type = "point")</code> to convert to an <em>sf</em> points object.</li>
<li>New <code><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot()</a></code> method for <code>BirdFlowRoutes</code> objects dispatches to <code><a href="../reference/plot_routes.html">plot_routes()</a></code>.</li>
<li>
<strong>Experimental:</strong> <code>plot_route()</code> and <code>plot(BirdFlowRoutes)</code> now do not require the BirdFlow object - as long as the attributes added by <code><a href="../reference/route.html">route()</a></code> are present. If the <code>bf</code> argument is used it supersedes the route attributes so including it will make your code less likely to break if we change the <code>BirdFlowRoutes</code> class. This is kind of nice though: <code>route(bf, 5, season = "prebreeding") |&gt; plot()</code>
</li>
<li>A new print method for <code>BirdFlowRoutes</code> is there mostly to hide the attributes while printing - but also has a new header line that states what the species and object is.</li>
<li>
<code><a href="../reference/plot_routes.html">plot_routes()</a></code> gains additional arguments to control line widths and dot sizing. <code><a href="../reference/animate_routes.html">animate_routes()</a></code> has access to them via <code>...</code>.</li>
</ul></div>
<div class="section level4">
<h4 id="a-note-about-the-new-birdflowroutes-class-0-1-0-9022">A note about the new <code>BirdFlowRoutes</code> class.<a class="anchor" aria-label="anchor" href="#a-note-about-the-new-birdflowroutes-class-0-1-0-9022"></a></h4>
<p>This class is very much a work in progress. Here’s where we stand.</p>
<ul><li>I’m committed to <code><a href="../reference/route.html">route()</a></code> returning a data frame like object that contains the data formerly in<code>rts$points</code> and I think the columns are fairly stable at this point.</li>
<li>I’m fairly committed to making it an S3 “BirdFlowRoutes” object and, at a minimum, including the CRS somewhere in the attributes.</li>
<li>I’m less committed to including all the other additional attributes. <a href="https://github.com/slager" class="external-link">@slager</a> is working on making BirdFlowRoutes like objects from tracking data and I hope that together we can figure out what data this object should look like.</li>
</ul><p>Right now the extra information in this class is used in only three places:</p>
<ul><li>
<code><a href="../reference/plot_routes.html">plot_routes()</a></code> and related <code>plot(BirdFlowRoutes)</code>
</li>
<li><code>st_as_sf(BirdFlowRoutes)</code></li>
<li><code>print(BirdFlowRoutes)</code></li>
</ul><p>In all other ways it should behave like a data frame. Some data frame manipulations will preserve attributes and class. Many will result in a standard data.frame.</p>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9021" id="birdflowr-0109021">BirdFlowR 0.1.0.9021<a class="anchor" aria-label="anchor" href="#birdflowr-0109021"></a></h2>
<ul><li>Added logo</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9020" id="birdflowr-0109020">BirdFlowR 0.1.0.9020<a class="anchor" aria-label="anchor" href="#birdflowr-0109020"></a></h2>
<p>This update fixes bugs and cleans things up. It shouldn’t break existing code.</p>
<ul><li><p>Fixed bug in <code><a href="../reference/distribution_performance.html">distribution_performance()</a></code> that caused an error with <code>metrics = "md_traverse_cor"</code> and added tests.</p></li>
<li><p>Removed <code>tests/testthat/Rplots.pdf</code> from version control and added it to <code>.gitignore</code>.</p></li>
<li><p>Added <strong>gifski</strong> to imports, and moved <strong>rnaturalearthdata</strong> from suggests to imports. This should make installation smoother and prevent gganimate::animate from writing lots of image files in the working directory. Closes <a href="https://github.com/birdflow-science/BirdFlowR/issues/102" class="external-link">#102</a>.</p></li>
<li><p><code><a href="../reference/interval_log_likelihood.html">interval_log_likelihood()</a></code> now returns a zero row data.frame if <code>intervals</code> or <code>observations</code> have zero rows. Care is taken to return the same column names and data types as would be returned with data. Previously zero row input resulted in an unhelpful error. Closes <a href="https://github.com/birdflow-science/BirdFlowR/issues/95" class="external-link">#95</a>.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9019" id="birdflowr-0109019">BirdFlowR 0.1.0.9019<a class="anchor" aria-label="anchor" href="#birdflowr-0109019"></a></h2>
<p>2023-06-07</p>
<div class="section level4">
<h4 id="breaking-changes-to-timestep-sequence-arguments-0-1-0-9019">BREAKING CHANGES to timestep sequence arguments<a class="anchor" aria-label="anchor" href="#breaking-changes-to-timestep-sequence-arguments-0-1-0-9019"></a></h4>
<ul><li>
<code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code> gains new <code>season</code> parameter as its second argument. Previously season could be specified via <code>start</code> but it was confusing, especially when called via <code>...</code> from other functions.<br></li>
<li>
<code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code> <code>n</code> argument renamed to <code>n_steps</code>.</li>
<li>All functions that allow specifying a sequence of timesteps (or date range) now use <code>...</code> passed to <code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code> to do so. Previously for <code><a href="../reference/predict.BirdFlow.html">predict()</a></code> and <code><a href="../reference/route.html">route()</a></code> some of these were explicit arguments that were then passed individually to <code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code>
</li>
</ul><p><strong>Affected functions</strong></p>
<p>This impacts calls to functions that pass arguments on to <code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code>:</p>
<ul><li>
<code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code> (directly)</li>
<li><code><a href="../reference/lookup_transitions.html">lookup_transitions()</a></code></li>
<li><code><a href="../reference/predict.BirdFlow.html">predict()</a></code></li>
<li><code><a href="../reference/route.html">route()</a></code></li>
<li><code><a href="../reference/distribution_performance.html">distribution_performance()</a></code></li>
<li><code><a href="../reference/animate_movement_vectors.html">animate_movement_vectors()</a></code></li>
</ul><p><strong>Broken usage</strong></p>
<ul><li>Code that passed season names explicitly to <code>start</code> will be broken: <code>lookup_timestep_sequence(bf, start = "prebreeding"</code>) .</li>
<li>Code that relied on the position of <code>start</code> and <code>end</code> to pass dates or timesteps will also fail: <code>lookup_timestep_sequence(bf, 1, 5)</code>.</li>
<li>Use of the <code>n</code> argument, will need to be updated to <code>n_steps</code>
</li>
</ul><p><strong>Unaffected usage</strong></p>
<ul><li>Passing dates or timesteps to <code>start</code> and <code>end</code> by name should be unaffected: <code>lookup_timestep_sequence(bf, start = 1, end = 5)</code>.</li>
<li>Passing a season by position works both before and after changes: <code>lookup_timestep_sequence(bf, "prebreeding")</code>
</li>
</ul><p>As a general rule going forward use argument names beyond the first two arguments (<code>x</code> and <code>season</code>).</p>
<p><strong>Default values</strong></p>
<ul><li><p>Default values in <code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code> were switched from missing to NULL - similar to changes made to <code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> in <a href="#birdflowr-0109009">BirdFlowR 0.1.0.9009</a>. This shouldn’t affect most users but will make setting arguments programmatically slightly easier.</p></li>
<li><p>If no arguments other than the BirdFlow object are passed to <code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code> it will return all timesteps. This is consistent with the change in <a href="#birdflowr-0109017">BirdFlowR 0.1.0.9017</a>. This default is now inherited by all the affected functions listed above. For some of the affected functions this is a change from the prior behavior of throwing an error if the time sequence was not specified. This is unlikely to affect existing code.</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9018" id="birdflowr-0109018">BirdFlowR 0.1.0.9018<a class="anchor" aria-label="anchor" href="#birdflowr-0109018"></a></h2>
<p>2023-06-06</p>
<ul><li>
<code><a href="../reference/sample_distr.html">sample_distr()</a></code> has a new argument <code>format</code> that allows specifying <code>distr</code>, <code>xy</code>, <code>latlon</code>, or <code>i</code> (location index) as the output format.<br>
The default is <code>distr</code> which mimics previous behavior. This is in response to <a href="https://github.com/birdflow-science/BirdFlowR/issues/88#issuecomment-1544401203" class="external-link">a comment</a> in issue <a href="https://github.com/birdflow-science/BirdFlowR/issues/88" class="external-link">#88</a>, the <code>"xy"</code> return format greatly simplifies calling <code><a href="../reference/route.html">route()</a></code> with a sample from a distribution.</li>
<li>BirdFlow vignette updated to use <code>sample_distr(format = "xy")</code> and to use <code><a href="../reference/plot_routes.html">plot_routes()</a></code>.</li>
<li>Bug fixed in <code>xy_to_latlong()</code> where column order in returned object was backwards.</li>
<li>Index conversion functions that previously returned a two column matrix now return a two column data.frame: <code><a href="../reference/index_conversions.html">xy_to_latlon()</a></code>, <code><a href="../reference/index_conversions.html">latlon_to_xy()</a></code>, <code><a href="../reference/index_conversions.html">i_to_rc()</a></code>, and <code><a href="../reference/index_conversions.html">i_to_xy()</a></code>. I found that most often I wanted to refer to columns by name making the data.frame format easier.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9017" id="birdflowr-0109017">BirdFlowR 0.1.0.9017<a class="anchor" aria-label="anchor" href="#birdflowr-0109017"></a></h2>
<p>2023-06-05</p>
<div class="section level4">
<h4 id="revamping-performance-metrics-0-1-0-9017">Revamping performance metrics<a class="anchor" aria-label="anchor" href="#revamping-performance-metrics-0-1-0-9017"></a></h4>
<ul><li>DEPRECATED <code><a href="../reference/evaluate_performance.html">evaluate_performance()</a></code> is now deprecated. Use <code><a href="../reference/distribution_performance.html">distribution_performance()</a></code> instead.</li>
<li>NEW <code><a href="../reference/distribution_performance.html">distribution_performance()</a></code> replaces <code><a href="../reference/evaluate_performance.html">evaluate_performance()</a></code> and has several differences.
<ul><li>
<code>traverse_cor</code>is replaced by two very similar metrics <code>st_traverse_cor</code> and <code>md_traverse_cor</code>. The first is a bug free version of the old <code>traverse_cor()</code>. The second is identical except it makes the predictions starting with a marginal rather than a status and trends distribution.</li>
<li>
<code>*_traverse_cor</code> metrics now utilize the dynamic mask to filter which cells are used in the correlation calculation.</li>
<li>
<code>...</code> arguments are passed to <code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code> to allow calculating metrics for just part of the year.</li>
</ul></li>
<li>
<code><a href="../reference/sparsify.html">sparsify()</a></code> (which still isn’t updated for dynamic masking) now uses <code><a href="../reference/distribution_performance.html">distribution_performance()</a></code> instead of <code><a href="../reference/evaluate_performance.html">evaluate_performance()</a></code>.</li>
<li>
<code><a href="../reference/lookup_transitions.html">lookup_transitions()</a></code> (private function) now has only one formal argument (x) all other arguments are now passed to <code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code> via <code>...</code> those other arguments are unchanged though so calling it shouldn’t change.</li>
<li>
<code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code> now has a default value <code>start = "all"</code> previously there was no default. This is mostly to make use in other functions via <code>...</code> easier as <code>all</code> is the most common default in calling functions.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9016" id="birdflowr-0109016">BirdFlowR 0.1.0.9016<a class="anchor" aria-label="anchor" href="#birdflowr-0109016"></a></h2>
<p>2023-06-03</p>
<ul><li>Edited Contributing guide</li>
<li>
<code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> now throws better errors when there are problems with the species argument (NA, NULL, or unresolvable species names).</li>
<li>Additional tests for<code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> for error conditions and to test file output.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9015" id="birdflowr-0109015">BirdFlowR 0.1.0.9015<a class="anchor" aria-label="anchor" href="#birdflowr-0109015"></a></h2>
<p>2023-06-02 * Added tests for <code><a href="../reference/add_dynamic_mask.html">add_dynamic_mask()</a></code> <a href="https://github.com/birdflow-science/BirdFlowR/issues/101" class="external-link">#101</a> * Added RMarkdown README. <a href="https://github.com/birdflow-science/BirdFlowR/issues/104" class="external-link">#104</a> * Now the README.md file is generated from the README.Rmd file (edit the .Rmd) * Added example plots to README. * Added contributing guide. <a href="https://github.com/birdflow-science/BirdFlowR/issues/97" class="external-link">#97</a></p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9014" id="birdflowr-0109014">BirdFlowR 0.1.0.9014<a class="anchor" aria-label="anchor" href="#birdflowr-0109014"></a></h2>
<p>2023-05-25</p>
<ul><li>Updated <code><a href="../reference/plot_routes.html">plot_routes()</a></code>
<ul><li>Works over year boundary</li>
<li>Color bar only shows the used date range.</li>
<li>Additional arguments to control appearance:<br><code>use_seasonal_colors</code>, <code>pal</code>, <code>barheight</code>
</li>
</ul></li>
<li>Updated animate_routes() added … argument that is passed onto <code><a href="../reference/plot_routes.html">plot_routes()</a></code> to control of appearance.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9013" id="birdflowr-0109013">BirdFlowR 0.1.0.9013<a class="anchor" aria-label="anchor" href="#birdflowr-0109013"></a></h2>
<p>2023-05-22</p>
<ul><li>New <code><a href="../reference/animate_routes.html">animate_routes()</a></code> <a href="https://github.com/birdflow-science/BirdFlowR/issues/93" class="external-link">#93</a></li>
<li>Updated <code><a href="../reference/plot_routes.html">plot_routes()</a></code>
<ul><li>Added dot for stay = 1 so all segment end points are visibly marked.</li>
<li>Subtle changes to code to support animation.</li>
</ul></li>
<li>Updated documentation of [route()] and [route_migration()] to full describe additional columns added in 0.1.0.9012</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9012" id="birdflowr-0109012">BirdFlowR 0.1.0.9012<a class="anchor" aria-label="anchor" href="#birdflowr-0109012"></a></h2>
<p>2023-05-17</p>
<ul><li>Fixed bug in <code><a href="../reference/route.html">route()</a></code> and <code><a href="../reference/route_migration.html">route_migration()</a></code> that prevented routing over year boundary.</li>
<li>New:
<ul><li>
<code><a href="../reference/plot_routes.html">plot_routes()</a></code> for plotting routes with ggplot2.</li>
<li>
<code><a href="../reference/compareGeom-BirdFlow.html">compareGeom()</a></code> methods for BirdFlow objects, possibly mixed with <code><a href="https://rspatial.github.io/terra/reference/SpatRaster-class.html" class="external-link">terra::SpatRaster</a></code> objects. See <code><a href="https://rspatial.github.io/terra/reference/compareGeom.html" class="external-link">terra::compareGeom()</a></code>
</li>
<li>
<code>proportion_of_year()</code> (internal function) converts a date into a number between 0 and 1.</li>
</ul></li>
<li>Updated:
<ul><li>
<code><a href="../reference/flatten_raster.html">flatten_raster()</a></code> supports multiple input formats <a href="https://github.com/birdflow-science/BirdFlowR/issues/23" class="external-link">#23</a></li>
<li>
<code><a href="../reference/rasterize.html">rasterize_distr()</a></code> supports multiple output formats <a href="https://github.com/birdflow-science/BirdFlowR/issues/23" class="external-link">#23</a></li>
<li>
<code><a href="../reference/route.html">route()</a></code> and <code><a href="../reference/route_migration.html">route_migration()</a></code> output return additional columns in the <code>points</code> item.<br></li>
</ul></li>
<li>Deprecated:
<ul><li>
<code><a href="../reference/expand_distr.html">expand_distr()</a></code> is now an internal function. Users can use <code>rasterize_distr( format = "numeric")</code> instead.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9011" id="birdflowr-0109011">BirdFlowR 0.1.0.9011<a class="anchor" aria-label="anchor" href="#birdflowr-0109011"></a></h2>
<p>2023-05-11</p>
<ul><li>Minor change to <code><a href="../reference/interval_log_likelihood.html">interval_log_likelihood()</a></code> for clearer code and to avoid warning when tibbles are used.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9010" id="birdflowr-0109010">BirdFlowR 0.1.0.9010<a class="anchor" aria-label="anchor" href="#birdflowr-0109010"></a></h2>
<p>2023-05-09</p>
<ul><li>Dockerfile: Bump rocker image to R 4.3.0 and error out of build on package installation failure</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9009" id="birdflowr-0109009">BirdFlowR 0.1.0.9009<a class="anchor" aria-label="anchor" href="#birdflowr-0109009"></a></h2>
<p>2023-05-09</p>
<ul><li><p><code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> now defaults the <code>res</code> parameter to NULL, making it easier to script around <code><a href="../reference/preprocess_species.html">preprocess_species()</a></code></p></li>
<li><p>Tweaked some tests to better run across different development environments</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9008" id="birdflowr-0109008">BirdFlowR 0.1.0.9008<a class="anchor" aria-label="anchor" href="#birdflowr-0109008"></a></h2>
<p>2023-05-09</p>
<ul><li><p><code><a href="../reference/export_import_birdflow.html">import_birdflow()</a></code> now converts logical hyperparameters masquerading as factors into logical. Addresses <a href="https://github.com/birdflow-science/BirdFlowR/issues/81" class="external-link">#81</a>.</p></li>
<li>
<p>Dropped legacy import functions:</p>
<ul><li>
<code>import_birdflow_v1()</code> for models that predate the R Package, this import required first converting a pickle file to an hdf5 and then importing from that and a TIFF file with the distributions.<br></li>
<li>
<code>import_prototype()</code> for the models that were includes in the prototype shiny app.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9007" id="birdflowr-0109007">BirdFlowR 0.1.0.9007<a class="anchor" aria-label="anchor" href="#birdflowr-0109007"></a></h2>
<p>Fixed URL.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9006" id="birdflowr-0109006">BirdFlowR 0.1.0.9006<a class="anchor" aria-label="anchor" href="#birdflowr-0109006"></a></h2>
<p>Cleaned up bad formatting in _pkgdown.yml.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9005" id="birdflowr-0109005">BirdFlowR 0.1.0.9005<a class="anchor" aria-label="anchor" href="#birdflowr-0109005"></a></h2>
<p>Added argument <code>n</code> to <code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code>, an alternative to <code>end</code>, <code>n</code> indicates how many transitions should be in the resulting sequence. <code><a href="../reference/route.html">route()</a></code>, <code><a href="../reference/lookup_transitions.html">lookup_transitions()</a></code>, <code><a href="../reference/predict.BirdFlow.html">predict()</a></code>, and <code><a href="../reference/animate_movement_vectors.html">animate_movement_vectors()</a></code> all gained either an explicit <code>n</code> parameter or access to it via <code>...</code>.</p>
<p><strong>Breaking change:</strong> The pre-existing <code>n</code> parameter to <code><a href="../reference/route.html">route()</a></code> was renamed <code>n_each</code> to avoid conflict with the new <code>n</code> parameter which is passed on to <code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code>.</p>
<p>Closes <a href="https://github.com/birdflow-science/BirdFlowR/issues/76" class="external-link">#76</a>.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9004" id="birdflowr-0109004">BirdFlowR 0.1.0.9004<a class="anchor" aria-label="anchor" href="#birdflowr-0109004"></a></h2>
<p>Made changes to support pkgdown.</p>
<ul><li>Added links to .yml</li>
<li>Added “BugReports” field to DESCRIPTION file</li>
<li>Added a second link to URL field in DESCRIPTION file linking to github repo</li>
<li>Switched development mode in .yml to <code>unreleased</code>. <code>auto</code> wasn’t working with version 0.0.1.x. When we have our first formal release it should be switched back to <code>auto</code>.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9003" id="birdflowr-0109003">BirdFlowR 0.1.0.9003<a class="anchor" aria-label="anchor" href="#birdflowr-0109003"></a></h2>
<ul><li>
<code><a href="../reference/evaluate_performance.html">evaluate_performance()</a></code> is now exported.</li>
<li>
<code><a href="../reference/evaluate_performance.html">evaluate_performance()</a></code> now uses the dynamic mask when calculating correlations (excluding the masked out cells). This means a bunch of cells that were essentially forced to zero in both sides of the correlation aren’t included in the calculation. Correlations will get lower and the effect will be more pronounced with lower correlations.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9002" id="birdflowr-0109002">BirdFlowR 0.1.0.9002<a class="anchor" aria-label="anchor" href="#birdflowr-0109002"></a></h2>
<div class="section level4">
<h4 id="added-movement-vector-visualizations-0-1-0-9002">Added movement vector visualizations<a class="anchor" aria-label="anchor" href="#added-movement-vector-visualizations-0-1-0-9002"></a></h4>
<p>These functions calculate and visualize the average movement out of each cell in a BirdFlow model during a particular transition.</p>
<p>New Functions</p>
<ul><li>
<code><a href="../reference/calc_movement_vectors.html">calc_movement_vectors()</a></code> returns a data frame with information on the average movement out of each cell in the model for a given timestep.</li>
<li>
<code><a href="../reference/plot_movement_vectors.html">plot_movement_vectors()</a></code> plots movement vectors directly from a BirdFlow model for a given timestep. Returns a <code>ggplot</code> object.</li>
<li>
<code><a href="../reference/animate_movement_vectors.html">animate_movement_vectors()</a></code> creates an animation of the vectors over a series of timesteps. Returns a <code>gganim</code> object.</li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0.9001" id="birdflowr-0109001">BirdFlowR 0.1.0.9001<a class="anchor" aria-label="anchor" href="#birdflowr-0109001"></a></h2>
<div class="section level3">
<h3 id="switch-to-dynamic-masking-0-1-0-9001">Switch to Dynamic masking<a class="anchor" aria-label="anchor" href="#switch-to-dynamic-masking-0-1-0-9001"></a></h3>
<div class="section level4">
<h4 id="summary-0-1-0-9001">Summary<a class="anchor" aria-label="anchor" href="#summary-0-1-0-9001"></a></h4>
<p>Dynamic masking is a major overhaul of the package in which the cells the model acts on will change over time and be limited to cells with non-zero value in the eBird S&amp;T distributions. This means that the marginal dimensions will vary over time, and they will often not be square.</p>
<p>The intent is to isolate the user and from the changes. In particular the output and input distribution objects will still contain all the active cells and most public function arguments are unchanged.</p>
<p>Functions that interact with the marginals now have to convert internally between standard distributions covering all active cells, and the the dynamically masked distributions that conform to the marginal dimensions. <code><a href="../reference/predict.BirdFlow.html">predict()</a></code>, <code><a href="../reference/route.html">route()</a></code>, and <code><a href="../reference/export_import_birdflow.html">import_birdflow()</a></code> all had substantial updates.</p>
<p>BirdFlow objects gained a great circle distance and a dynamic mask, both created in preprocessing, and variable marginals and transitions dimensions. The great circle distance is used by python and then dropped (in python) from the fitted model, as it’s fairly large and easy to recalculate with <code><a href="../reference/great_circle_distances.html">great_circle_distances()</a></code>.</p>
</div>
<div class="section level4">
<h4 id="detailed-changes-0-1-0-9001">Detailed changes<a class="anchor" aria-label="anchor" href="#detailed-changes-0-1-0-9001"></a></h4>
<ul><li>
<strong>BirdFlow object format changes</strong>
<ul><li>New <code>/distances/</code> contains values from a distance matrix of great circle distances in km between each pair of locations - converted to a vector of non duplicated values by <code><a href="../reference/shorten_distance_matrix.html">shorten_distance_matrix()</a></code> full matrix can be recreated with <code><a href="../reference/shorten_distance_matrix.html">expand_distance_matrix()</a></code> this is added to the export HDF5 by <code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> but not retained in the fitted models, the distances can be recreated with <code><a href="../reference/great_circle_distances.html">great_circle_distances()</a></code>.</li>
<li>New <code>/geom/dynamic_mask</code> this is a matrix with a row for each active cell in the model (see <code><a href="../reference/dimensions.html">n_active()</a></code>) and a column for each timestep. The cells have a one to one relationship with the cells in `/distr’ and are TRUE if the cell is included in the model for the timestep and FALSE otherwise.</li>
<li>
<code>/metadata/birdflow_version</code> is now 3.<br></li>
<li>New <code>/metdata/birdflowr_version</code> stores the package version when <code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> is/was called.</li>
<li>New <code>metadata/hyperparameters</code> and <code>metadata/loss_values</code> contain information generated during python model fitting.</li>
</ul></li>
<li>
<strong>New functions</strong>
<ul><li>
<code><a href="../reference/get_dynamic_mask.html">get_dynamic_mask()</a></code> similar to <code><a href="../reference/get_distr.html">get_distr()</a></code> but for dynamic mask data.</li>
<li>
<code><a href="../reference/add_dynamic_mask.html">add_dynamic_mask()</a></code> updates an old BirdFlow object (in an R session) by adding a dynamic mask. This is mainly to facilitate the transition to allow testing the package with the old models.</li>
<li>
<code><a href="../reference/has.html">has_dynamic_mask()</a></code> returns a logical.</li>
<li>
<code><a href="../reference/import_birdflow_v3.html">import_birdflow_v3()</a></code> internal function is called by <code><a href="../reference/export_import_birdflow.html">import_birdflow()</a></code> for version 3 BirdFlow HDF5 files.</li>
<li>
<code><a href="../reference/great_circle_distances.html">great_circle_distances()</a></code> creates a great circle distance matrix encoding the distance (km) between every pair of cells in a BirdFlow object.</li>
</ul></li>
<li>
<strong>Updated functions</strong>
<ul><li>
<code><a href="../reference/export_import_birdflow.html">import_birdflow()</a></code>
<ul><li>now works with version 2 and 3 BirdFlow HDF5 files (added version 3, dropped version 1)</li>
<li>reads the dynamic mask</li>
<li>reads metadata/hyperparameters</li>
<li>read metadata/loss_values</li>
</ul></li>
<li>
<code><a href="../reference/get_distr.html">get_distr()</a></code> with <code>from_marginals = TRUE</code> now has to expand the truncated distribution calculated from the marginal out to a full distribution.</li>
<li>
<code><a href="../reference/predict.BirdFlow.html">predict()</a></code> and <code><a href="../reference/route.html">route()</a></code> have to map from full distributions, to truncated distributions before applying the transition and then, expand back to full for output.</li>
<li>
<code>validate_birdflow()</code> now checks the dimensions of the marginals and transition matrices against the dynamic mask cell counts for each timestep.</li>
<li>
<code><a href="../reference/preprocess_species.html">preprocess_species()</a></code>
<ul><li>now calls <code><a href="../reference/great_circle_distances.html">great_circle_distances()</a></code> and <code><a href="../reference/shorten_distance_matrix.html">shorten_distance_matrix()</a></code>to create “/distances” component of the HDF5</li>
<li>adds “geom/dynamic_mask” which is a logical matrix indicating which cells of “/distr” are non-zero for each timestep.</li>
<li>Has updated heuristic to set resolution based on the number of parameters given dynamic masking.</li>
<li>new argument <code>dummy_dynamic_mask()</code> adds a dynamic mask that is all TRUE to force fitting of the prior style of BirdFlow object.</li>
</ul></li>
<li>
<code><a href="../reference/sparsify.html">sparsify()</a></code> has not been updated to work with dynamic masks, but will now throw an error telling you that if you try to use it on a BirdFlow object with a dynamic mask.</li>
</ul></li>
</ul></div>
</div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9075" id="birdflowr-0009075">BirdFlowR 0.0.0.9075<a class="anchor" aria-label="anchor" href="#birdflowr-0009075"></a></h2>
<p>2023-04-18</p>
<p>Added BirdFlow methods for generics defined in <strong>sf</strong> * <code><a href="https://r-spatial.github.io/sf/reference/st_crs.html" class="external-link">st_crs()</a></code> returns an object of class <code>crs</code> used by <strong>sf</strong> to define coordinate reference systems (CRS). * <code><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">st_bbox()</a></code> returns an object of class <code>bbox</code> containing both the extent and CRS of a BirdFlow object. Can be passed to <code><a href="https://r-spatial.github.io/sf/reference/st_as_sfc.html" class="external-link">st_as_sfc()</a></code> to convert to a polygon.</p>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9074" id="birdflowr-0009074">BirdFlowR 0.0.0.9074<a class="anchor" aria-label="anchor" href="#birdflowr-0009074"></a></h2>
<p>2023-04-13</p>
<ul><li>Changed behavior
<ul><li>
<code><a href="../reference/get_naturalearth.html">get_naturalearth()</a></code> and related functions now by default crop off the buffer after transforming the Natural Earth data so that the returned object extent matches the extent of <code>x</code>. Whether this cropping occurs is now controlled by <code>keep_buffer</code> which defaults to FALSE. Previously it was<br>
controlled by <code>match_extent</code>.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9073" id="birdflowr-0009073">BirdFlowR 0.0.0.9073<a class="anchor" aria-label="anchor" href="#birdflowr-0009073"></a></h2>
<p>2023-04-11</p>
<ul><li>Changed behavior:
<ul><li><p><code><a href="../reference/lookup_timestep.html">lookup_timestep()</a></code> and timestep lookup throughout the package is now consistent with <code><a href="https://ebird.github.io/ebirdst/reference/date_to_st_week.html" class="external-link">ebirdst::date_to_st_week()</a></code> this wasn’t previously true. Some dates near the edges of the week breaks will end up classified into a different timestep than previously.</p></li>
<li><p><code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> now saves the breakpoints from <code>ebirdst::ebirdst_weeks</code> as <code>start</code> and <code>end</code> instead of <code>week_start</code> and <code>week_end</code>.</p></li>
</ul></li>
<li>New functions:
<ul><li><p><code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code> workhorse function for processing date range input to other functions. Generate forward or backward sequences from timesteps, dates, or season name input, possibly with a season buffer.</p></li>
<li><p><code><a href="../reference/lookup_season_timesteps.html">lookup_season_timesteps()</a></code> narrowly focused helper, returns forward timestep sequences associated with a season possibly with a buffer (in timesteps) beyond the edge of the season.</p></li>
</ul></li>
<li>Updated functions to use <code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code>
<ul><li><code><a href="../reference/lookup_transitions.html">lookup_transitions()</a></code></li>
<li><code><a href="../reference/route.html">route()</a></code></li>
<li><code><a href="../reference/route_migration.html">route_migration()</a></code></li>
<li><code><a href="../reference/predict.BirdFlow.html">predict()</a></code></li>
</ul></li>
<li>Updated functions to use <code><a href="../reference/lookup_timestep.html">lookup_timestep()</a></code>
<ul><li><code><a href="../reference/get_distr.html">get_distr()</a></code></li>
</ul></li>
<li>Addresses issues:
<ul><li>Fixes bug in <a href="https://github.com/birdflow-science/BirdFlowR/issues/66" class="external-link">#66</a> where date lookup forward across the year boundary failed.</li>
<li>Addresses <a href="https://github.com/birdflow-science/BirdFlowR/issues/68" class="external-link">#68</a> by providing a function to lookup timestep series based on season names (and adds a buffer ability).</li>
<li>Closes <a href="https://github.com/birdflow-science/BirdFlowR/issues/56" class="external-link">#56</a> time now is processed mostly by <code><a href="../reference/lookup_timestep.html">lookup_timestep()</a></code> for points in time, and <code><a href="../reference/lookup_timestep_sequence.html">lookup_timestep_sequence()</a></code> for date ranges. Point lookup now uses <code>findInterval</code> on breaks derived from <code>ebirdst::ebirdst_weeks</code> rather than from <code><a href="https://rspatial.github.io/terra/reference/summarize-generics.html" class="external-link">which.min()</a></code> on a difference from center of the nominal day for each week. This should also make time lookup compatible with partial year BirdFlow models.</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9072" id="birdflowr-0009072">BirdFlowR 0.0.0.9072<a class="anchor" aria-label="anchor" href="#birdflowr-0009072"></a></h2>
<p>2023-04-11</p>
<ul><li>Fixed bug introduced when <strong>ebirdst</strong> 2.2021.1 converted all columns of <code>ebirdst_runs</code> to character. <code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> now defensively forces the columns that should be (and were) logical to logical, and numeric to numeric.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9071" id="birdflowr-0009071">BirdFlowR 0.0.0.9071<a class="anchor" aria-label="anchor" href="#birdflowr-0009071"></a></h2>
<p>2023-04-06</p>
<ul><li><p>Added functions <code><a href="../reference/index_conversions.html">latlon_to_xy()</a></code> and <code><a href="../reference/index_conversions.html">xy_to_latlon()</a></code> to convert from WGS84 (EPSG:4326) and x and y coordinates in the BirdFlow objects CRS. Fixes <a href="https://github.com/birdflow-science/BirdFlowR/issues/64" class="external-link">#64</a>.</p></li>
<li><p>CHANGED behavior in a bunch of the index conversion functions, previously, many threw errors with NA input or values out of range. Most of them now return NA in both of those situations. This made sense to me in the context of <a href="https://github.com/birdflow-science/BirdFlowR/issues/61" class="external-link">#61</a>.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9070" id="birdflowr-0009070">BirdFlowR 0.0.0.9070<a class="anchor" aria-label="anchor" href="#birdflowr-0009070"></a></h2>
<p>2023-04-06</p>
<ul><li><p>Switching development version number scheme. From now on I will increment the development version by one with every change in the main branch (merged pull request). Previously the version was the issue number.</p></li>
<li><p>Fixed <a href="https://github.com/birdflow-science/BirdFlowR/issues/61" class="external-link">#61</a> (and added test). Now <code><a href="../reference/interval_log_likelihood.html">interval_log_likelihood()</a></code> sets <code>exclude</code> and <code>not_active</code> columns to TRUE if either of the involved observations are entirely outside of the extent of the BirdFlow object. Previously locations outside of extent resulted in an error.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9054" id="birdflowr-0009054">BirdFlowR 0.0.0.9054<a class="anchor" aria-label="anchor" href="#birdflowr-0009054"></a></h2>
<p>2023-03-30</p>
<ul><li><p>New interval_loglikelihood() calculates log likelihood for banding and tracking data given a BirdFlow model.</p></li>
<li><p>new supporting functions:</p></li>
<li><p><code><a href="../reference/build_transitions.html">drop_transitions()</a></code></p></li>
<li><p><code><a href="../reference/is_location_valid.html">is_location_valid()</a></code>, <code><a href="../reference/is_location_valid.html">is_distr_valid()</a></code> test whether locations and distributions are valid inputs for <code><a href="../reference/predict.BirdFlow.html">predict()</a></code> and <code><a href="../reference/route.html">route()</a></code></p></li>
<li><p><code><a href="../reference/lookup_timestep.html">lookup_timestep()</a></code></p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9022" id="birdflowr-0009022">BirdFlowR 0.0.0.9022<a class="anchor" aria-label="anchor" href="#birdflowr-0009022"></a></h2>
<p>2023-03-27</p>
<ul><li><p><code><a href="../reference/get_naturalearth.html">get_naturalearth()</a></code> and related functions now throw a helpful warning if the extent is empty, and, as before, return an empty <code>sf</code> object.</p></li>
<li><p><code><a href="../reference/get_naturalearth.html">get_naturalearth()</a></code> has an improved, more robust way of processing the vector data that works for specific projections. Currently it is used only for Mollweide (“moll”) and Lambert Equal Area (“laea”) based CRSs.</p></li>
<li><p><code><a href="../reference/get_naturalearth.html">get_naturalearth()</a></code> has a new argument <code>match_extent</code> which if set to <code>TRUE</code> causes the result to be clipped to the precise extent of the input object (<code>x</code>). Use <code>TRUE</code> when plotting with ggplot2 so that the Natural Earth data doesn’t result in an expanded plot extent. The default, <code>FALSE</code> is appropriate for base R plotting so that the Natural Earth Data runs up to and beyond the edge of the plot regardless of whether the aspect ratio of <code>x</code> matches the plot window’s.</p></li>
<li><p><code><a href="../reference/get_naturalearth.html">get_naturalearth()</a></code> has a new argument <code>use_old_method</code> which, if TRUE forces the less robust method regardless of projection. It is there only for testing the function and should be left at the default for all other uses.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9044" id="birdflowr-0009044">BirdFlowR 0.0.0.9044<a class="anchor" aria-label="anchor" href="#birdflowr-0009044"></a></h2>
<ul><li><p>new function <code>build_transitions(x)</code> will populate <code>x$transitions</code> with both forward and backwards transitions. This is recommended before repeated <code>forecast()</code> or predict calls as it avoids repeatedly making transitions on the fly. It does triple the memory usage for the BirdFlow object so should probably only be done with sparse BirdFlow models. It currently will work on any but throws a warning if the BirdFlow model is not sparse.</p></li>
<li><p>previously <code>transitions_from_marginal()</code> produced a standard matrix. Now, if the marginal is sparse the conversion uses and preserves the sparse matrix. Similarly, if the transition matrix is sparse <code><a href="../reference/predict.BirdFlow.html">predict()</a></code> and <code><a href="../reference/route.html">route()</a></code> both calculate on sparse objects. This should speed those two functions up significantly.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9036" id="birdflowr-0009036">BirdFlowR 0.0.0.9036<a class="anchor" aria-label="anchor" href="#birdflowr-0009036"></a></h2>
<ul><li>replaced <code>forecast()</code> with a BirdFlow method for <code><a href="../reference/predict.BirdFlow.html">predict()</a></code>.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9033" id="birdflowr-0009033">BirdFlowR 0.0.0.9033<a class="anchor" aria-label="anchor" href="#birdflowr-0009033"></a></h2>
<p>The end result of all the time stuff enumerated below is that (1) you can set the time format, (2) as before when possible the time associated with each distribution is stored in dim names, (3) when it’s a single distribution and thus not possible to store the time in the dim names a new <code>"time"</code> attribute is added to the object to store the time associated with the distribution.</p>
<ul><li><p>new <code><a href="../reference/birdflow_options.html">birdflow_options()</a></code> allows setting global options that persist for the session. Currently there are two options <code>verbose</code> and <code>time_format</code>.</p></li>
<li><p>The <code>time_format</code> option controls the labeling of distributions either in column names if there are more than 1 distribution or via the “time” attribute (See below) if there’s a single distribution. This affects <code><a href="../reference/get_distr.html">get_distr()</a></code>, <code><a href="../reference/predict.BirdFlow.html">predict()</a></code>, and <code><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast()</a></code>.</p></li>
<li><p><code><a href="../reference/get_distr.html">get_distr()</a></code> now adds an attribute <code>"time"</code> when returning a single distribution as a vector. Multiple distributions already used matrix column names to record the time associated with each distribution.</p></li>
<li><p>Similarly, <code><a href="../reference/expand_distr.html">expand_distr()</a></code> when called on a single distribution will preserve the <code>"time"</code> attribute in its output matrix, and <code><a href="../reference/flatten_raster.html">flatten_raster()</a></code> called on a single distribution’s raster (a matrix) will also preserve the “time” attribute in its output vector.</p></li>
<li><p><code><a href="../reference/rasterize.html">rasterize_distr()</a></code> and thus also <code><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast()</a></code> now convert the <code>"time"</code> attribute to a layer name in the output raster when there is a single distribution. They previously and still do this with the distribution column names for multiple distributions.</p></li>
<li><p>The names for the column dimension of distribution matrices has changed from “timestep” to “time” both in the internal, stored object and in returned objects from <code><a href="../reference/get_distr.html">get_distr()</a></code> and <code>forecast()</code>.</p></li>
<li><p><code><a href="../reference/fix_dead_ends.html">fix_dead_ends()</a></code>, <code><a href="../reference/preprocess_species.html">preprocess_species()</a></code>, and <code><a href="../reference/sparsify.html">sparsify()</a></code> now honor <code>birdflow_options("verbose")</code> - printing progress and information only if it is <code>TRUE</code>.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9034" id="birdflowr-0009034">BirdFlowR 0.0.0.9034<a class="anchor" aria-label="anchor" href="#birdflowr-0009034"></a></h2>
<ul><li>Changed <code><a href="../reference/preprocess_species.html">preprocess_species()</a></code> <code>gb</code> argument to <code>gpu_ram</code>.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9035" id="birdflowr-0009035">BirdFlowR 0.0.0.9035<a class="anchor" aria-label="anchor" href="#birdflowr-0009035"></a></h2>
<ul><li>
<code><a href="../reference/sparsify.html">sparsify()</a></code> no longer throws confusing warning (<a href="https://github.com/birdflow-science/BirdFlowR/issues/35" class="external-link">#35</a>)</li>
<li>First argument of <code><a href="../reference/sparsify.html">sparsify()</a></code> changed from <code>bf</code> to <code>x</code> (consistent with <a href="https://github.com/birdflow-science/BirdFlowR/issues/19" class="external-link">#19</a>)</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9038" id="birdflowr-0009038">BirdFlowR 0.0.0.9038<a class="anchor" aria-label="anchor" href="#birdflowr-0009038"></a></h2>
<ul><li><p>Updated docker file to work with Apple silicon and not to use cached github repos. (commit <a href="https://github.com/birdflow-science/BirdFlowR/issues/37" class="external-link">#37</a>)</p></li>
<li><p>Updated installation instructions for Docker (commit <a href="https://github.com/birdflow-science/BirdFlowR/issues/37" class="external-link">#37</a>)</p></li>
<li><p>Route output snapshot testing no longer depends on the print(lines) but does check novel points in the points component of the return value. This should fix an issue currently with it failing CRAN check because sf:: changed slightly how it prints a summary of an SF object to screen and also make the snapshot test a little less hair trigger.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9028" id="birdflowr-0009028">BirdFlowR 0.0.0.9028<a class="anchor" aria-label="anchor" href="#birdflowr-0009028"></a></h2>
<p>2023-03-08</p>
<ul><li><p>New <code><a href="../articles/Preprocess.html">vignette("Preprocess")</a></code> covers preprocessing, importing, and<br>
sparsification</p></li>
<li><p>New <code><a href="../articles/Installation.html">vignette("Installation")</a></code> covers R, RStudio, and package installation; and installing in a Docker container.</p></li>
<li><p>Updated installation instructions everywhere to use remotes instead of devtools and do not re-install packages unnecessarily.</p></li>
<li><p>Expanded “Learn More”” section in README.md to link to all vignettes as well as the BirdFlow paper.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9021" id="birdflowr-0009021">BirdFlowR 0.0.0.9021<a class="anchor" aria-label="anchor" href="#birdflowr-0009021"></a></h2>
<p>2023-03-03</p>
<ul><li>Updated preprocess_species()
<ul><li>Now only downloads the files it needs <a href="https://github.com/birdflow-science/BirdFlowR/issues/21" class="external-link">#21</a>
</li>
<li>Slight adjustment to resolution heuristic, it should take fewer steps to find the right resolution.</li>
<li>Added additional tests to cover error conditions and clipping</li>
</ul></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9019" id="birdflowr-0009019">BirdFlowR 0.0.0.9019<a class="anchor" aria-label="anchor" href="#birdflowr-0009019"></a></h2>
<p>2023-03-01</p>
<ul><li>Nomenclature cleanup (round 1)
<ul><li>collapse_distr(x, bf) -&gt; collapse_raster(raster, bf)</li>
<li>evaluate_performance(bf) -&gt; evaluate_performance(x)</li>
<li>expand_distr(x, bf) -&gt; expand_distr(distr, bf)</li>
<li>get_distr(which, bf, from_marginals) -&gt; get_distr(x, which, from_marginals)</li>
<li>get_transition(x, bf) -&gt; get_transition(x, transition)</li>
<li>lookup_transitions(start, end, bf, direction) -&gt; lookup_transition(x, start, end, direction)</li>
<li>sample_distr(x, bf) -&gt; sample_distr(distr, bf)</li>
</ul></li>
<li>No longer exported:
<ul><li>evaluate_performance()</li>
<li>find_dead_ends()</li>
<li>find_threshold()</li>
<li>fix_dead_ends()</li>
<li>import_prototype()</li>
<li>lookup_transitions()</li>
<li>new_BirdFlow()</li>
<li>transition_from_marginal()</li>
</ul></li>
<li>Added “@keyword internal” to documentation for all non-exported functions.<br>
This removes the documentation from the package manual and index, but it’s still accessible with ?function_name.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9016" id="birdflowr-0009016">BirdFlowR 0.0.0.9016<a class="anchor" aria-label="anchor" href="#birdflowr-0009016"></a></h2>
<p>2023-02-27</p>
<ul><li>Added package down. Starting to use <a href="https://semver.org/" class="external-link">semantic versioning</a>.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9017" id="birdflowr-0009017">BirdFlowR 0.0.0.9017<a class="anchor" aria-label="anchor" href="#birdflowr-0009017"></a></h2>
<p>2023-02-27</p>
<ul><li>Fix bug introduced by <strong>ebirdst</strong> 2.2021.0 (switch from <strong>raster</strong> to <strong>terra</strong>) <a href="https://github.com/birdflow-science/BirdFlowR/issues/17" class="external-link">#17</a>.</li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9003" id="birdflowr-0009003">BirdFlowR 0.0.0.9003<a class="anchor" aria-label="anchor" href="#birdflowr-0009003"></a></h2>
<p>2023-02-27</p>
<ul><li><p>Updated installation instructions. Closing <a href="https://github.com/birdflow-science/BirdFlowR/issues/11" class="external-link">#11</a>.</p></li>
<li><p>Added docker file. <a href="https://github.com/birdflow-science/BirdFlowR/pull/15#issuecomment-1445152787" class="external-link">Usage instructions.</a></p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9002" id="birdflowr-0009002">BirdFlowR 0.0.0.9002<a class="anchor" aria-label="anchor" href="#birdflowr-0009002"></a></h2>
<p>2023-02-23</p>
<ul><li><p>Added “biocViews:” before “Imports:” in DESCRIPTION so that devtools can find and install rhdf5 (from Bioconductor) while installing the packages BirdFlowR needs. <a href="https://github.com/birdflow-science/BirdFlowR/issues/13" class="external-link">#13</a></p></li>
<li><p>Vignette now attempts to load rnaturalearthdata with utils::install.packages() instead of <code>devtools::install_cran()</code> in attempt to fix <a href="https://github.com/birdflow-science/BirdFlowR/issues/11" class="external-link">#11</a></p></li>
<li><p>Updated <code><a href="../reference/get_naturalearth.html">get_naturalearth()</a></code> so that it handles some cases in which it previously failed. In particular extents that span more than 180 deg of longitude, and extents that cross the 180 deg. meridian that defines the edge of the WGS84 projection both now work. The function still doesn’t handle polar projections or global extents in most projections. Fixes <a href="https://github.com/birdflow-science/BirdFlowR/issues/14" class="external-link">#14</a></p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.0.0.9001" id="birdflowr-0009001">BirdFlowR 0.0.0.9001<a class="anchor" aria-label="anchor" href="#birdflowr-0009001"></a></h2>
<p>2023-02-21</p>
<ul><li><p>Switched order of package installation in readme and added installation of rnaturalearthdata to vignette <a href="https://github.com/birdflow-science/BirdFlowR/issues/11" class="external-link">#11</a></p></li>
<li><p>Added a <code>NEWS.md</code> file to track changes to the package.</p></li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ethan Plunkett, National Science Foundation.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

